import { useState, useRef, useEffect } from 'react';
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Input } from "@/components/ui/input";
import { Badge } from "@/components/ui/badge";
import { Bot, User, Mic, MicOff, Send, Volume2, VolumeX, Plus, Camera, Upload } from "lucide-react";
import VoiceControls from "./VoiceControls";
import AccessibilityControls from "./AccessibilityControls";
import ImageUpload from "./ImageUpload";
import { useLanguage } from "./LanguageProvider";

interface Message {
  id: string;
  text: string;
  type: 'user' | 'bot';
  timestamp: Date;
  translation?: string;
  reactions?: string[];
  rating?: number;
}

const EnhancedChatDemo = () => {
  const [messages, setMessages] = useState<Message[]>([]);
  const [inputText, setInputText] = useState('');
  const [isVoiceMode, setIsVoiceMode] = useState(false);
  const [isListening, setIsListening] = useState(false);
  const [isSpeaking, setIsSpeaking] = useState(false);
  const [isTyping, setIsTyping] = useState(false);
  const [showControls, setShowControls] = useState(true);
  const [speechEnabled, setSpeechEnabled] = useState(true);
  const [showImageUpload, setShowImageUpload] = useState(false);
  const { currentLanguage, t } = useLanguage();
  
  const messagesEndRef = useRef<HTMLDivElement>(null);
  const recognitionRef = useRef<any>(null);

  // Enhanced service-specific responses with more context
  const serviceResponses = {
    'pension-inquiry': {
      English: {
        patterns: ['pension', 'retirement', 'old age', 'senior citizen'],
        responses: [
          "Your pension application (ID: PEN2024001234) has been approved! тВ╣5,000 will be credited to your account on the 1st of every month. You can collect your pension card from the nearest post office.",
          "To check your pension status, please provide your Aadhaar number. Your current pension amount is тВ╣5,000 per month.",
          "For pension-related queries, you can visit the District Collector office or call our helpline at 1800-123-4567."
        ]
      },
      Hindi: {
        patterns: ['рдкреЗрдВрд╢рди', 'рд╕реЗрд╡рд╛рдирд┐рд╡реГрддреНрддрд┐', 'рдмреБрдЬреБрд░реНрдЧ', 'рд╡реГрджреНрдзрд╛рд╡рд╕реНрдерд╛'],
        responses: [
          "рдЖрдкрдХрд╛ рдкреЗрдВрд╢рди рдЖрд╡реЗрджрди (ID: PEN2024001234) рд╕реНрд╡реАрдХреГрдд рд╣реЛ рдЧрдпрд╛ рд╣реИ! рд╣рд░ рдорд╣реАрдиреЗ рдХреА 1 рддрд╛рд░реАрдЦ рдХреЛ рдЖрдкрдХреЗ рдЦрд╛рддреЗ рдореЗрдВ тВ╣5,000 рдЬрдорд╛ рд╣реЛрдВрдЧреЗред",
          "рдкреЗрдВрд╢рди рдХреА рд╕реНрдерд┐рддрд┐ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдХреГрдкрдпрд╛ рдЕрдкрдирд╛ рдЖрдзрд╛рд░ рдирдВрдмрд░ рдкреНрд░рджрд╛рди рдХрд░реЗрдВред рдЖрдкрдХреА рд╡рд░реНрддрдорд╛рди рдкреЗрдВрд╢рди рд░рд╛рд╢рд┐ тВ╣5,000 рдкреНрд░рддрд┐ рдорд╛рд╣ рд╣реИред",
          "рдкреЗрдВрд╢рди рд╕рдВрдмрдВрдзреА рдкреНрд░рд╢реНрдиреЛрдВ рдХреЗ рд▓рд┐рдП, рдЖрдк рдЬрд┐рд▓рд╛ рдХрд▓реЗрдХреНрдЯрд░ рдХрд╛рд░реНрдпрд╛рд▓рдп рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рд╣рдорд╛рд░реА рд╣реЗрд▓реНрдкрд▓рд╛рдЗрди 1800-123-4567 рдкрд░ рдХреЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред"
        ]
      },
      Telugu: {
        patterns: ['р░кр▒Жр░ир▒Нр░╖р░ир▒Н', 'р░кр░жр░╡р▒А р░╡р░┐р░░р░ор░г', 'р░╡р▒Гр░жр▒Нр░зр▒Бр░▓р▒Б', 'р░╕р▒Ар░ир░┐р░пр░░р▒Н'],
        responses: [
          "р░ор▒А р░кр▒Жр░ир▒Нр░╖р░ир▒Н р░жр░░р░Цр░╛р░╕р▒Нр░др▒Б (ID: PEN2024001234) р░Жр░ор▒Лр░жр░┐р░Вр░Ър░мр░бр░┐р░Вр░жр░┐! р░кр▒Нр░░р░др░┐ р░ир▒Жр░▓ 1р░╡ р░др▒Зр░жр▒Ар░и р░ор▒А р░Цр░╛р░др░╛р░▓р▒Л тВ╣5,000 р░Ьр░о р░Ер░╡р▒Бр░др▒Бр░Вр░жр░┐ред",
          "р░кр▒Жр░ир▒Нр░╖р░ир▒Н р░╕р▒Нр░ер░┐р░др░┐р░ир░┐ р░др░ир░┐р░Цр▒А р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐, р░жр░пр░Ър▒Зр░╕р░┐ р░ор▒А р░Жр░зр░╛р░░р▒Н р░ир░Вр░мр░░р▒Н р░Ер░Вр░жр░┐р░Вр░Ър░Вр░бр░┐ред р░ор▒А р░кр▒Нр░░р░╕р▒Нр░др▒Бр░д р░кр▒Жр░ир▒Нр░╖р░ир▒Н р░ор▒Кр░др▒Нр░др░В р░ир▒Жр░▓р░Хр▒Б тВ╣5,000.",
          "р░кр▒Жр░ир▒Нр░╖р░ир▒Н р░╕р░Вр░мр░Вр░зр░┐р░д р░кр▒Нр░░р░╢р▒Нр░ир░▓р░Хр▒Б, р░ор▒Ар░░р▒Б р░Ьр░┐р░▓р▒Нр░▓р░╛ р░Хр░▓р▒Жр░Хр▒Нр░Яр░░р▒Н р░Хр░╛р░░р▒Нр░пр░╛р░▓р░пр░╛р░ир░┐р░Хр░┐ р░╡р▒Жр░│р▒Нр░▓р░╡р░Ър▒Нр░Ър▒Б р░▓р▒Зр░жр░╛ р░ор░╛ р░╣р▒Жр░▓р▒Нр░кр▒НтАМр░▓р▒Ир░ир▒Н 1800-123-4567р░Хр▒Б р░Хр░╛р░▓р▒Н р░Ър▒Зр░пр░╡р░Ър▒Нр░Ър▒Бред"
        ]
      },
      Tamil: {
        patterns: ['роУропрпНро╡рпВродро┐ропроорпН', 'роУропрпНро╡рпБ', 'роорпБродро┐ропрпЛро░рпН', 'ро╡ропродро╛ройро╡ро░рпН'],
        responses: [
          "роЙроЩрпНроХро│рпН роУропрпНро╡рпВродро┐роп ро╡ро┐рогрпНрогрокрпНрокроорпН (ID: PEN2024001234) роЕроЩрпНроХрпАроХро░ро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ! роТро╡рпНро╡рпКро░рпБ рооро╛родроорпН 1роЖроорпН родрпЗродро┐ роЙроЩрпНроХро│рпН роХрогроХрпНроХро┐ро▓рпН тВ╣5,000 ро╡ро░ро╡рпБ ро╡рпИроХрпНроХрокрпНрокроЯрпБроорпН.",
          "роУропрпНро╡рпВродро┐роп роиро┐ро▓рпИропрпИроЪрпН роЪро░ро┐рокро╛ро░рпНроХрпНроХ, родропро╡рпБроЪрпЖропрпНродрпБ роЙроЩрпНроХро│рпН роЖродро╛ро░рпН роОрогрпНрогрпИ ро╡ро┤роЩрпНроХро╡рпБроорпН. роЙроЩрпНроХро│рпН родро▒рпНрокрпЛродрпИроп роУропрпНро╡рпВродро┐роп родрпКроХрпИ рооро╛родродрпНродро┐ро▒рпНроХрпБ тВ╣5,000.",
          "роУропрпНро╡рпВродро┐ропроорпН родрпКроЯро░рпНрокро╛рой роХрпЗро│рпНро╡ро┐роХро│рпБроХрпНроХрпБ, роирпАроЩрпНроХро│рпН рооро╛ро╡роЯрпНроЯ роЖроЯрпНроЪро┐ропро░рпН роЕро▓рпБро╡ро▓роХродрпНродро┐ро▒рпНроХрпБроЪрпН роЪрпЖро▓рпНро▓ро▓ро╛роорпН роЕро▓рпНро▓родрпБ роОроЩрпНроХро│рпН роЙродро╡ро┐ роОрогрпН 1800-123-4567роР роЕро┤рпИроХрпНроХро▓ро╛роорпН."
        ]
      },
      Kannada: {
        patterns: ['р▓кр▓┐р▓Вр▓Ър▓гр▓┐', 'р▓ир▓┐р▓╡р│Гр▓др│Нр▓др▓┐', 'р▓╡р▓пр▓╕р│Нр▓╕р▓╛р▓жр▓╡р▓░р│Б', 'р▓╣р▓┐р▓░р▓┐р▓пр▓░р│Б'],
        responses: [
          "р▓ир▓┐р▓ор│Нр▓о р▓кр▓┐р▓Вр▓Ър▓гр▓┐ р▓Ер▓░р│Нр▓Ьр▓┐ (ID: PEN2024001234) р▓Ер▓ир│Бр▓ор│Лр▓жр▓┐р▓╕р▓▓р▓╛р▓Чр▓┐р▓жр│Ж! р▓кр│Нр▓░р▓др▓┐ р▓др▓┐р▓Вр▓Чр▓│ 1 р▓░р▓Вр▓жр│Б р▓ир▓┐р▓ор│Нр▓о р▓Цр▓╛р▓др│Жр▓Чр│Ж тВ╣5,000 р▓Ьр▓ор▓╛ р▓ор▓╛р▓бр▓▓р▓╛р▓Чр│Бр▓др│Нр▓др▓жр│Ж.",
          "р▓кр▓┐р▓Вр▓Ър▓гр▓┐ р▓╕р│Нр▓ер▓┐р▓др▓┐р▓пр▓ир│Нр▓ир│Б р▓кр▓░р▓┐р▓╢р│Ар▓▓р▓┐р▓╕р▓▓р│Б, р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б р▓ир▓┐р▓ор│Нр▓о р▓Жр▓зр▓╛р▓░р│Н р▓╕р▓Вр▓Цр│Нр▓пр│Жр▓пр▓ир│Нр▓ир│Б р▓Тр▓жр▓Чр▓┐р▓╕р▓┐. р▓ир▓┐р▓ор│Нр▓о р▓кр│Нр▓░р▓╕р│Нр▓др│Бр▓д р▓кр▓┐р▓Вр▓Ър▓гр▓┐ р▓ор│Кр▓др│Нр▓д р▓др▓┐р▓Вр▓Чр▓│р▓┐р▓Чр│Ж тВ╣5,000.",
          "р▓кр▓┐р▓Вр▓Ър▓гр▓┐ р▓╕р▓Вр▓мр▓Вр▓зр▓┐р▓д р▓кр│Нр▓░р▓╢р│Нр▓ир│Жр▓Чр▓│р▓┐р▓Чр│Ж, р▓ир│Ар▓╡р│Б р▓Ьр▓┐р▓▓р│Нр▓▓р▓╛ р▓Хр▓▓р│Жр▓Хр│Нр▓Яр▓░р│Н р▓Хр▓Ър│Зр▓░р▓┐р▓Чр│Ж р▓╣р│Лр▓Чр▓мр▓╣р│Бр▓жр│Б р▓Ер▓ер▓╡р▓╛ р▓ир▓ор│Нр▓о р▓╕р▓╣р▓╛р▓пр▓╡р▓╛р▓гр▓┐ 1800-123-4567 р▓Чр│Ж р▓Хр▓░р│Ж р▓ор▓╛р▓бр▓мр▓╣р│Бр▓жр│Б."
        ]
      }
    },
    'ration-card': {
      English: {
        patterns: ['ration', 'food', 'card', 'subsidy', 'grain'],
        responses: [
          "To apply for a ration card, you need: Aadhaar card, address proof, income certificate, and family photographs. Processing takes 15-20 working days.",
          "Your ration card application is under review. You can track status using application number RAT2024005678.",
          "Ration card benefits include subsidized rice at тВ╣3/kg, wheat at тВ╣2/kg, and sugar at тВ╣13.50/kg."
        ]
      },
      Hindi: {
        patterns: ['рд░рд╛рд╢рди', 'рдЦрд╛рджреНрдп', 'рдХрд╛рд░реНрдб', 'рд╕рдмреНрд╕рд┐рдбреА', 'рдЕрдирд╛рдЬ'],
        responses: [
          "рд░рд╛рд╢рди рдХрд╛рд░реНрдб рдХреЗ рд▓рд┐рдП рдЖрд╡реЗрджрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдЪрд╛рд╣рд┐рдП: рдЖрдзрд╛рд░ рдХрд╛рд░реНрдб, рдкрддрд╛ рдкреНрд░рдорд╛рдг, рдЖрдп рдкреНрд░рдорд╛рдгрдкрддреНрд░, рдФрд░ рдкрд╛рд░рд┐рд╡рд╛рд░рд┐рдХ рддрд╕реНрд╡реАрд░реЗрдВред",
          "рдЖрдкрдХрд╛ рд░рд╛рд╢рди рдХрд╛рд░реНрдб рдЖрд╡реЗрджрди рд╕рдореАрдХреНрд╖рд╛рдзреАрди рд╣реИред рдЖрдк рдЖрд╡реЗрджрди рд╕рдВрдЦреНрдпрд╛ RAT2024005678 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕реНрдерд┐рддрд┐ рдЯреНрд░реИрдХ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред",
          "рд░рд╛рд╢рди рдХрд╛рд░реНрдб рдХреЗ рд▓рд╛рднреЛрдВ рдореЗрдВ рд╕рдмреНрд╕рд┐рдбреА рд╡рд╛рд▓рд╛ рдЪрд╛рд╡рд▓ тВ╣3/рдХрд┐рдЧреНрд░рд╛, рдЧреЗрд╣реВрдВ тВ╣2/рдХрд┐рдЧреНрд░рд╛, рдФрд░ рдЪреАрдиреА тВ╣13.50/рдХрд┐рдЧреНрд░рд╛ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред"
        ]
      },
      Telugu: {
        patterns: ['р░░р▒Зр░╖р░ир▒Н', 'р░Жр░╣р░╛р░░р░В', 'р░Хр░╛р░░р▒Нр░бр▒Н', 'р░╕р░мр▒Нр░╕р░┐р░бр▒А', 'р░зр░╛р░ир▒Нр░пр░В'],
        responses: [
          "р░░р▒Зр░╖р░ир▒Н р░Хр░╛р░░р▒Нр░бр▒Н р░Хр▒Лр░╕р░В р░жр░░р░Цр░╛р░╕р▒Нр░др▒Б р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░ор▒Ар░Хр▒Б р░Ер░╡р░╕р░░р░В: р░Жр░зр░╛р░░р▒Н р░Хр░╛р░░р▒Нр░бр▒Н, р░Ър░┐р░░р▒Бр░ир░╛р░ор░╛ р░░р▒Бр░Ьр▒Бр░╡р▒Б, р░Жр░жр░╛р░п р░зр▒Гр░╡р▒Ар░Хр░░р░г р░кр░др▒Нр░░р░В, р░ор░░р░┐р░пр▒Б р░Хр▒Бр░Яр▒Бр░Вр░м р░лр▒Лр░Яр▒Лр░▓р▒Бред",
          "р░ор▒А р░░р▒Зр░╖р░ир▒Н р░Хр░╛р░░р▒Нр░бр▒Н р░жр░░р░Цр░╛р░╕р▒Нр░др▒Б р░╕р░ор▒Ар░Хр▒Нр░╖р░▓р▒Л р░Йр░Вр░жр░┐. р░ор▒Ар░░р▒Б р░жр░░р░Цр░╛р░╕р▒Нр░др▒Б р░ир░Вр░мр░░р▒Н RAT2024005678 р░Йр░кр░пр▒Лр░Чр░┐р░Вр░Ър░┐ р░╕р▒Нр░ер░┐р░др░┐р░ир░┐ р░Яр▒Нр░░р░╛р░Хр▒Н р░Ър▒Зр░пр░╡р░Ър▒Нр░Ър▒БуАВ",
          "р░░р▒Зр░╖р░ир▒Н р░Хр░╛р░░р▒Нр░бр▒Н р░кр▒Нр░░р░пр▒Лр░Ьр░ир░╛р░▓р░▓р▒Л р░╕р░мр▒Нр░╕р░┐р░бр▒А р░мр░┐р░пр▒Нр░пр░В тВ╣3/р░Хр░┐р░▓р▒Л, р░Чр▒Лр░зр▒Бр░ор░▓р▒Б тВ╣2/р░Хр░┐р░▓р▒Л, р░ор░░р░┐р░пр▒Б р░Ър░Хр▒Нр░Хр▒Жр░░ тВ╣13.50/р░Хр░┐р░▓р▒Л р░Йр░ир▒Нр░ир░╛р░пр░┐ред"
        ]
      },
      Tamil: {
        patterns: ['ро░рпЗро╖ройрпН', 'роЙрогро╡рпБ', 'роХро╛ро░рпНроЯрпБ', 'роЪрпВро▓', 'родро╛ройро┐ропроорпН'],
        responses: [
          "ро░рпЗро╖ройрпН роХро╛ро░рпНроЯрпБроХрпНроХрпБ ро╡ро┐рогрпНрогрокрпНрокро┐роХрпНроХ, роирпАроЩрпНроХро│рпН: роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ, роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ, ро╡ро░рпБрооро╛рой роЪро╛ройрпНро▒ро┐родро┤рпН рооро▒рпНро▒рпБроорпН роХрпБроЯрпБроорпНрок рокрпБроХрпИрокрпНрокроЯроЩрпНроХро│рпН родрпЗро╡рпИ.",
          "роЙроЩрпНроХро│рпН ро░рпЗро╖ройрпН роХро╛ро░рпНроЯрпБ ро╡ро┐рогрпНрогрокрпНрокроорпН роородро┐рокрпНрокрпАроЯрпНроЯро┐ро▓рпН роЙро│рпНро│родрпБ. роирпАроЩрпНроХро│рпН ро╡ро┐рогрпНрогрокрпНрок роОрогрпН RAT2024005678 роРрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роиро┐ро▓рпИропрпИ роХрогрпНроХро╛рогро┐роХрпНроХро▓ро╛роорпН.",
          "ро░рпЗро╖ройрпН роХро╛ро░рпНроЯрпБ роиройрпНроорпИроХро│рпН: роЪро▓рпБроХрпИ роХрпКрогрпНроЯ роЕро░ро┐роЪро┐ тВ╣3/роХро┐ро▓рпЛ, роХрпЛродрпБроорпИ тВ╣2/роХро┐ро▓рпЛ, рооро▒рпНро▒рпБроорпН роЪро░рпНроХрпНроХро░рпИ тВ╣13.50/роХро┐ро▓рпЛ."
        ]
      },
      Kannada: {
        patterns: ['р▓░р│Зр▓╖р▓ир│Н', 'р▓Жр▓╣р▓╛р▓░', 'р▓Хр▓╛р▓░р│Нр▓бр│Н', 'р▓Йр▓кр▓╢р│Нр▓░р│Зр▓гр│А', 'р▓зр▓╛р▓ир│Нр▓п'],
        responses: [
          "р▓░р│Зр▓╖р▓ир│Н р▓Хр▓╛р▓░р│Нр▓бр│НтАМр▓Чр▓╛р▓Чр▓┐ р▓Ер▓░р│Нр▓Ьр▓┐ р▓╕р▓▓р│Нр▓▓р▓┐р▓╕р▓▓р│Б, р▓ир▓┐р▓ор▓Чр│Ж р▓Ер▓Чр▓др│Нр▓пр▓╡р▓┐р▓жр│Ж: р▓Жр▓зр▓╛р▓░р│Н р▓Хр▓╛р▓░р│Нр▓бр│Н, р▓╡р▓┐р▓│р▓╛р▓╕ р▓кр│Бр▓░р▓╛р▓╡р│Ж, р▓Жр▓жр▓╛р▓п р▓кр│Нр▓░р▓ор▓╛р▓гр▓кр▓др│Нр▓░ р▓ор▓др│Нр▓др│Б р▓Хр│Бр▓Яр│Бр▓Вр▓м р▓Ыр▓╛р▓пр▓╛р▓Ър▓┐р▓др│Нр▓░р▓Чр▓│р│Б.",
          "р▓ир▓┐р▓ор│Нр▓о р▓░р│Зр▓╖р▓ир│Н р▓Хр▓╛р▓░р│Нр▓бр│Н р▓Ер▓░р│Нр▓Ьр▓┐ р▓кр▓░р▓┐р▓╢р│Ар▓▓р▓ир│Жр▓пр▓▓р│Нр▓▓р▓┐ р▓Зр▓жр│Ж. р▓ир│Ар▓╡р│Б р▓Ер▓░р│Нр▓Ьр▓┐ р▓╕р▓Вр▓Цр│Нр▓пр│Ж RAT2024005678 р▓Ер▓ир│Нр▓ир│Б р▓мр▓│р▓╕р▓┐р▓Хр│Кр▓Вр▓бр│Б р▓╕р│Нр▓ер▓┐р▓др▓┐р▓пр▓ир│Нр▓ир│Б р▓Яр│Нр▓░р▓╛р▓Хр│Н р▓ор▓╛р▓бр▓мр▓╣р│Бр▓жр│Б.",
          "р▓░р│Зр▓╖р▓ир│Н р▓Хр▓╛р▓░р│Нр▓бр│Н р▓кр│Нр▓░р▓пр│Лр▓Ьр▓ир▓Чр▓│р│Б: р▓╕р▓мр│Нр▓╕р▓┐р▓бр▓┐ р▓╣р│Кр▓Вр▓жр▓┐р▓░р│Бр▓╡ р▓Ер▓Хр│Нр▓Хр▓┐ тВ╣3/р▓Хр▓┐р▓▓р│Л, р▓Чр│Лр▓зр▓┐ тВ╣2/р▓Хр▓┐р▓▓р│Л, р▓ор▓др│Нр▓др│Б р▓╕р▓Хр│Нр▓Хр▓░р│Ж тВ╣13.50/р▓Хр▓┐р▓▓р│Л."
        ]
      }
    },
    'health-scheme': {
      English: {
        patterns: ['health', 'medical', 'insurance', 'ayushman', 'treatment'],
        responses: [
          "You can register for Ayushman Bharat scheme. It provides health coverage up to тВ╣5 lakhs per family per year.",
          "To check your health scheme eligibility, please provide your Aadhaar number and family details.",
          "Health scheme covers hospitalization, surgery, and pre/post hospitalization expenses at empaneled hospitals."
        ]
      },
      Hindi: {
        patterns: ['рд╕реНрд╡рд╛рд╕реНрдереНрдп', 'рдЪрд┐рдХрд┐рддреНрд╕рд╛', 'рдмреАрдорд╛', 'рдЖрдпреБрд╖реНрдорд╛рди', 'рдЙрдкрдЪрд╛рд░'],
        responses: [
          "рдЖрдк рдЖрдпреБрд╖реНрдорд╛рди рднрд╛рд░рдд рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдкрдВрдЬреАрдХрд░рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рдкреНрд░рддрд┐ рдкрд░рд┐рд╡рд╛рд░ рдкреНрд░рддрд┐ рд╡рд░реНрд╖ тВ╣5 рд▓рд╛рдЦ рддрдХ рдХрд╛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдХрд╡рд░реЗрдЬ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИред",
          "рд╕реНрд╡рд╛рд╕реНрдереНрдп рдпреЛрдЬрдирд╛ рдХреА рдкрд╛рддреНрд░рддрд╛ рдЬрд╛рдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдХреГрдкрдпрд╛ рдЕрдкрдирд╛ рдЖрдзрд╛рд░ рдирдВрдмрд░ рдФрд░ рдкрд░рд┐рд╡рд╛рд░ рдХреЗ рд╡рд┐рд╡рд░рдг рдкреНрд░рджрд╛рди рдХрд░реЗрдВред",
          "рд╕реНрд╡рд╛рд╕реНрдереНрдп рдпреЛрдЬрдирд╛ рдЕрд╕реНрдкрддрд╛рд▓ рдореЗрдВ рднрд░реНрддреА, рд╕рд░реНрдЬрд░реА, рдФрд░ рдкреВрд░реНрд╡/рдкрд╢реНрдЪрд╛рдд рдЕрд╕реНрдкрддрд╛рд▓ рдореЗрдВ рднрд░реНрддреА рдЦрд░реНрдЪреЛрдВ рдХреЛ рдХрд╡рд░ рдХрд░рддреА рд╣реИред"
        ]
      },
      Telugu: {
        patterns: ['р░Жр░░р▒Лр░Чр▒Нр░п', 'р░Ър░┐р░Хр░┐р░др▒Нр░╕', 'р░нр▒Ар░ор░╛', 'р░Жр░пр▒Бр░╖р▒Нр░ор░╛р░ир▒Н', 'р░Ър░┐р░Хр░┐р░др▒Нр░╕'],
        responses: [
          "р░ор▒Ар░░р▒Б р░Жр░пр▒Бр░╖р▒Нр░ор░╛р░ир▒Н р░нр░╛р░░р░др▒Н р░кр░ер░Хр░╛р░ир░┐р░Хр░┐ р░ир░ор▒Лр░жр▒Б р░Ър▒Зр░╕р▒Бр░Хр▒Лр░╡р░Ър▒Нр░Ър▒Б. р░Зр░жр░┐ р░кр▒Нр░░р░др░┐ р░Хр▒Бр░Яр▒Бр░Вр░мр░╛р░ир░┐р░Хр░┐ р░╕р░Вр░╡р░др▒Нр░╕р░░р░╛р░ир░┐р░Хр░┐ тВ╣5 р░▓р░Хр▒Нр░╖р░▓ р░╡р░░р░Хр▒Б р░Жр░░р▒Лр░Чр▒Нр░п р░Хр░╡р░░р▒Зр░Ьр▒Н р░Ер░Вр░жр░┐р░╕р▒Нр░др▒Бр░Вр░жр░┐.",
          "р░ор▒А р░Жр░░р▒Лр░Чр▒Нр░п р░кр░ер░Хр░╛р░ир░┐р░Хр░┐ р░Ер░░р▒Нр░╣р░др░ир▒Б р░др░ир░┐р░Цр▒А р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐, р░жр░пр░Ър▒Зр░╕р░┐ р░ор▒А р░Жр░зр░╛р░░р▒Н р░╕р░Вр░Цр▒Нр░п р░ор░░р░┐р░пр▒Б р░Хр▒Бр░Яр▒Бр░Вр░м р░╡р░┐р░╡р░░р░╛р░▓р░ир▒Б р░Ер░Вр░жр░┐р░Вр░Ър░Вр░бр░┐.",
          "р░Жр░░р▒Лр░Чр▒Нр░п р░кр░ер░Хр░В р░Жр░╕р▒Бр░кр░др▒Нр░░р░┐р░▓р▒Л р░Ър▒Зр░░р░бр░В, р░╢р░╕р▒Нр░др▒Нр░░р░Ър░┐р░Хр░┐р░др▒Нр░╕, р░ор░░р░┐р░пр▒Б р░ор▒Бр░Вр░жр▒Бр░Чр░╛/р░др░░р▒Нр░╡р░╛р░д р░Жр░╕р▒Бр░кр░др▒Нр░░р░┐р░▓р▒Л р░Ър▒Зр░░р▒З р░Цр░░р▒Нр░Ър▒Бр░▓р░ир▒Б р░Хр░╡р░░р▒Н р░Ър▒Зр░╕р▒Нр░др▒Бр░Вр░жр░┐."
        ]
      },
      Tamil: {
        patterns: ['роЖро░рпЛроХрпНроХро┐ропроорпН', 'рооро░рпБродрпНродрпБро╡роорпН', 'роХро╛рокрпНрокрпАроЯрпБ', 'роЖропрпБро╖рпНрооро╛ройрпН', 'роЪро┐роХро┐роЪрпНроЪрпИ'],
        responses: [
          "роирпАроЩрпНроХро│рпН роЖропрпБро╖рпНрооро╛ройрпН рокро╛ро░родрпН родро┐роЯрпНроЯродрпНродро┐ро▒рпНроХрпБ рокродро┐ро╡рпБ роЪрпЖропрпНропро▓ро╛роорпН. роЗродрпБ роХрпБроЯрпБроорпНрокродрпНродро┐ро▒рпНроХрпБ роЖрогрпНроЯрпБроХрпНроХрпБ тВ╣5 ро▓роЯрпНроЪроорпН ро╡ро░рпИ роЪрпБроХро╛родро╛ро░ роХро╡ро░рпЗроЬрпН ро╡ро┤роЩрпНроХрпБроХро┐ро▒родрпБ.",
          "роЙроЩрпНроХро│рпН роЪрпБроХро╛родро╛ро░ родро┐роЯрпНроЯродрпНродро┐ро▒рпНроХро╛рой родроХрпБродро┐роХро│рпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХ, родропро╡рпБроЪрпЖропрпНродрпБ роЙроЩрпНроХро│рпН роЖродро╛ро░рпН роОрогрпНрогрпИропрпБроорпН роХрпБроЯрпБроорпНрок ро╡ро┐ро╡ро░роЩрпНроХро│рпИропрпБроорпН ро╡ро┤роЩрпНроХро╡рпБроорпН.",
          "роЪрпБроХро╛родро╛ро░ родро┐роЯрпНроЯроорпН рооро░рпБродрпНродрпБро╡рооройрпИропро┐ро▓рпН роЪрпЗро░рпНроХрпНроХрпИ, роЕро▒рпБро╡рпИ роЪро┐роХро┐роЪрпНроЪрпИ рооро▒рпНро▒рпБроорпН роорпБройрпН/рокро┐ро▒роХрпБ рооро░рпБродрпНродрпБро╡рооройрпИропро┐ро▓рпН роЪрпЗро░рпНроХрпНроХрпИ роЪрпЖро▓ро╡рпБроХро│рпИ роХро╡ро░рпБроХро┐ро▒родрпБ."
        ]
      },
      Kannada: {
        patterns: ['р▓Жр▓░р│Лр▓Чр│Нр▓п', 'р▓Ър▓┐р▓Хр▓┐р▓др│Нр▓╕р│Ж', 'р▓мр│Ар▓ор▓╛', 'р▓Жр▓пр│Бр▓╖р│Нр▓ор▓╛р▓ир│Н', 'р▓Ър▓┐р▓Хр▓┐р▓др│Нр▓╕р│Ж'],
        responses: [
          "р▓ир│Ар▓╡р│Б р▓Жр▓пр│Бр▓╖р│Нр▓ор▓╛р▓ир│Н р▓нр▓╛р▓░р▓др│Н р▓пр│Лр▓Ьр▓ир│Жр▓Чр│Ж р▓ир│Лр▓Вр▓жр▓гр▓┐ р▓ор▓╛р▓бр▓мр▓╣р│Бр▓жр│Б. р▓Зр▓жр│Б р▓Хр│Бр▓Яр│Бр▓Вр▓мр▓Хр│Нр▓Хр│Ж р▓╡р▓░р│Нр▓╖р▓Хр│Нр▓Хр│Ж тВ╣5 р▓▓р▓Хр│Нр▓╖р▓жр▓╡р▓░р│Жр▓Чр│Ж р▓Жр▓░р│Лр▓Чр│Нр▓п р▓Хр▓╡р▓░р│Зр▓Ьр│Н р▓Тр▓жр▓Чр▓┐р▓╕р│Бр▓др│Нр▓др▓жр│Ж.",
          "р▓ир▓┐р▓ор│Нр▓о р▓Жр▓░р│Лр▓Чр│Нр▓п р▓пр│Лр▓Ьр▓ир│Жр▓п р▓Ер▓░р│Нр▓╣р▓др│Жр▓пр▓ир│Нр▓ир│Б р▓кр▓░р▓┐р▓╢р│Ар▓▓р▓┐р▓╕р▓▓р│Б, р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б р▓ир▓┐р▓ор│Нр▓о р▓Жр▓зр▓╛р▓░р│Н р▓╕р▓Вр▓Цр│Нр▓пр│Жр▓пр▓ир│Нр▓ир│Б р▓ор▓др│Нр▓др│Б р▓Хр│Бр▓Яр│Бр▓Вр▓мр▓ж р▓╡р▓┐р▓╡р▓░р▓Чр▓│р▓ир│Нр▓ир│Б р▓Тр▓жр▓Чр▓┐р▓╕р▓┐.",
          "р▓Жр▓░р│Лр▓Чр│Нр▓п р▓пр│Лр▓Ьр▓ир│Ж р▓Жр▓╕р│Нр▓кр▓др│Нр▓░р│Жр▓пр▓▓р│Нр▓▓р▓┐ р▓жр▓╛р▓Цр▓▓р▓╛р▓Чр│Бр▓╡р│Бр▓жр│Б, р▓╢р▓╕р│Нр▓др│Нр▓░р▓Ър▓┐р▓Хр▓┐р▓др│Нр▓╕р│Ж р▓ор▓др│Нр▓др│Б р▓ор│Бр▓Вр▓Ър▓┐р▓и/р▓ор▓░р│Б р▓Жр▓╕р│Нр▓кр▓др│Нр▓░р│Жр▓пр▓▓р│Нр▓▓р▓┐ р▓жр▓╛р▓Цр▓▓р▓╛р▓Чр│Бр▓╡ р▓Цр▓░р│Нр▓Ър│Бр▓Чр▓│р▓ир│Нр▓ир│Б р▓Хр▓╡р▓░р▓┐р▓╕р│Бр▓др│Нр▓др▓жр│Ж."
        ]
      }
    },
    'land-records': {
      English: {
        patterns: ['land', 'property', 'records', 'survey', 'revenue'],
        responses: [
          "To verify land records, you need survey number and village details. Documents can be downloaded from state revenue portal.",
          "Your land record verification is complete. Property survey number 123/4 shows clear title.",
          "For land mutation, submit application with sale deed and relevant documents to village revenue officer."
        ]
      },
      Hindi: {
        patterns: ['рднреВрдорд┐', 'рд╕рдВрдкрддреНрддрд┐', 'рд░рд┐рдХреЙрд░реНрдб', 'рд╕рд░реНрд╡реЗрдХреНрд╖рдг', 'рд░рд╛рдЬрд╕реНрд╡'],
        responses: [
          "рднреВрдорд┐ рд░рд┐рдХреЙрд░реНрдб рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╕рд░реНрд╡реЗ рдирдВрдмрд░ рдФрд░ рдЧрд╛рдВрд╡ рдХрд╛ рд╡рд┐рд╡рд░рдг рдЪрд╛рд╣рд┐рдПред рджрд╕реНрддрд╛рд╡реЗрдЬ рд░рд╛рдЬреНрдп рд░рд╛рдЬрд╕реНрд╡ рдкреЛрд░реНрдЯрд▓ рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред",
          "рдЖрдкрдХреА рднреВрдорд┐ рд░рд┐рдХреЙрд░реНрдб рд╕рддреНрдпрд╛рдкрди рдкреВрд░реА рд╣реЛ рдЧрдИ рд╣реИред рд╕рдВрдкрддреНрддрд┐ рд╕рд░реНрд╡реЗ рдирдВрдмрд░ 123/4 рд╕реНрдкрд╖реНрдЯ рд╢реАрд░реНрд╖рдХ рджрд┐рдЦрд╛рддрд╛ рд╣реИред",
          "рднреВрдорд┐ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рд▓рд┐рдП, рдмрд┐рдХреНрд░реА рд╡рд┐рд▓реЗрдЦ рдФрд░ рд╕рдВрдмрдВрдзрд┐рдд рджрд╕реНрддрд╛рд╡реЗрдЬреЛрдВ рдХреЗ рд╕рд╛рде рдЖрд╡реЗрджрди рдЬрдорд╛ рдХрд░реЗрдВред"
        ]
      },
      Telugu: {
        patterns: ['р░нр▒Вр░ор░┐', 'р░╕р░Вр░кр░др▒Нр░др░┐', 'р░░р░┐р░Хр░╛р░░р▒Нр░бр▒Бр░▓р▒Б', 'р░╕р░░р▒Нр░╡р▒З', 'р░░р░╛р░мр░Вр░жр▒А'],
        responses: [
          "р░нр▒Вр░ор░┐ р░░р░┐р░Хр░╛р░░р▒Нр░бр▒Бр░▓р░ир▒Б р░зр▒Гр░╡р▒Ар░Хр░░р░┐р░Вр░Ър░бр░╛р░ир░┐р░Хр░┐, р░ор▒Ар░Хр▒Б р░╕р░░р▒Нр░╡р▒З р░╕р░Вр░Цр▒Нр░п р░ор░░р░┐р░пр▒Б р░Чр▒Нр░░р░╛р░о р░╡р░┐р░╡р░░р░╛р░▓р▒Б р░Ер░╡р░╕р░░р░В. р░кр░др▒Нр░░р░╛р░▓р░ир▒Б р░░р░╛р░╖р▒Нр░Яр▒Нр░░ р░░р░╛р░мр░Вр░жр▒А р░кр▒Лр░░р▒Нр░Яр░▓р▒Н р░ир▒Бр░Вр░бр░┐ р░бр▒Мр░ир▒НтАМр░▓р▒Лр░бр▒Н р░Ър▒Зр░пр░╡р░Ър▒Нр░Ър▒Б.",
          "р░ор▒А р░нр▒Вр░ор░┐ р░░р░┐р░Хр░╛р░░р▒Нр░бр▒Н р░зр▒Гр░╡р▒Ар░Хр░░р░г р░кр▒Вр░░р▒Нр░др░пр░┐р░Вр░жр░┐. р░Жр░╕р▒Нр░др░┐ р░╕р░░р▒Нр░╡р▒З р░╕р░Вр░Цр▒Нр░п 123/4 р░╕р▒Нр░кр░╖р▒Нр░Яр░ор▒Ир░и р░╢р▒Ар░░р▒Нр░╖р░┐р░Хр░ир▒Б р░Ър▒Вр░кр░┐р░╕р▒Нр░др▒Бр░Вр░жр░┐.",
          "р░нр▒Вр░ор░┐ р░ор░╛р░░р▒Нр░кр▒Б р░Хр▒Лр░╕р░В, р░Ер░ор▒Нр░ор░Хр░кр▒Б р░Тр░кр▒Нр░кр░Вр░жр░В р░ор░░р░┐р░пр▒Б р░╕р░Вр░мр░Вр░зр░┐р░д р░кр░др▒Нр░░р░╛р░▓р░др▒Л р░Хр▒Вр░бр░┐р░и р░жр░░р░Цр░╛р░╕р▒Нр░др▒Бр░ир▒Б р░Чр▒Нр░░р░╛р░о р░░р░╛р░мр░Вр░жр▒А р░Ер░зр░┐р░Хр░╛р░░р░┐р░Хр░┐ р░╕р░ор░░р▒Нр░кр░┐р░Вр░Ър░Вр░бр░┐."
        ]
      },
      Tamil: {
        patterns: ['роиро┐ро▓', 'роЪрпКродрпНродрпБ', 'рокродро┐ро╡рпБроХро│рпН', 'роЪро░рпНро╡рпЗ', 'ро╡ро░рпБро╡ро╛ропрпН'],
        responses: [
          "роиро┐ро▓ рокродро┐ро╡рпБроХро│рпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХ, роирпАроЩрпНроХро│рпН роЪро░рпНро╡рпЗ роОрогрпН рооро▒рпНро▒рпБроорпН роХро┐ро░ро╛роо ро╡ро┐ро╡ро░роЩрпНроХро│рпН родрпЗро╡рпИ. роЖро╡рогроЩрпНроХро│рпИ рооро╛роиро┐ро▓ ро╡ро░рпБро╡ро╛ропрпН рокрпЛро░рпНроЯрпНроЯро┐ро▓рпН роЗро░рпБроирпНродрпБ рокродро┐ро╡ро┐ро▒роХрпНроХроорпН роЪрпЖропрпНропро▓ро╛роорпН.",
          "роЙроЩрпНроХро│рпН роиро┐ро▓ рокродро┐ро╡ро┐ройрпН роЪро░ро┐рокро╛ро░рпНрокрпНрокрпБ роорпБроЯро┐роирпНродродрпБ. роЪрпКродрпНродрпБ роЪро░рпНро╡рпЗ роОрогрпН 123/4 родрпЖро│ро┐ро╡ро╛рой родро▓рпИрокрпНрокрпИ роХро╛роЯрпНроЯрпБроХро┐ро▒родрпБ.",
          "роиро┐ро▓ рооро╛ро▒рпНро▒родрпНродро┐ро▒рпНроХрпБ, ро╡ро┐ро▒рпНрокройрпИ роТрокрпНрокроирпНродроорпН рооро▒рпНро▒рпБроорпН родрпКроЯро░рпНрокрпБроЯрпИроп роЖро╡рогроЩрпНроХро│рпБроЯройрпН ро╡ро┐рогрпНрогрокрпНрокродрпНродрпИ роХро┐ро░ро╛роо ро╡ро░рпБро╡ро╛ропрпН роЕродро┐роХро╛ро░ро┐роХрпНроХрпБ роЪрооро░рпНрокрпНрокро┐роХрпНроХро╡рпБроорпН."
        ]
      },
      Kannada: {
        patterns: ['р▓нр│Вр▓ор▓┐', 'р▓╕р│Нр▓╡р▓др│Нр▓др│Б', 'р▓жр▓╛р▓Цр▓▓р│Жр▓Чр▓│р│Б', 'р▓╕р▓░р│Нр▓╡р│З', 'р▓Жр▓жр▓╛р▓п'],
        responses: [
          "р▓нр│Вр▓ор▓┐ р▓жр▓╛р▓Цр▓▓р│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓кр▓░р▓┐р▓╢р│Ар▓▓р▓┐р▓╕р▓▓р│Б, р▓ир▓┐р▓ор▓Чр│Ж р▓╕р▓░р│Нр▓╡р│З р▓╕р▓Вр▓Цр│Нр▓пр│Ж р▓ор▓др│Нр▓др│Б р▓Чр│Нр▓░р▓╛р▓о р▓╡р▓┐р▓╡р▓░р▓Чр▓│р│Б р▓мр│Зр▓Хр▓╛р▓Чр│Бр▓др│Нр▓др▓╡р│Ж. р▓жр▓╛р▓Цр▓▓р│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓░р▓╛р▓Ьр│Нр▓п р▓Жр▓жр▓╛р▓п р▓кр│Лр▓░р│Нр▓Яр▓▓р│НтАМр▓ир▓┐р▓Вр▓ж р▓бр│Мр▓ир│НтАМр▓▓р│Лр▓бр│Н р▓ор▓╛р▓бр▓мр▓╣р│Бр▓жр│Б.",
          "р▓ир▓┐р▓ор│Нр▓о р▓нр│Вр▓ор▓┐ р▓жр▓╛р▓Цр▓▓р│Ж р▓кр▓░р▓┐р▓╢р│Ар▓▓р▓ир│Ж р▓╕р▓Вр▓кр│Вр▓░р│Нр▓гр▓╡р▓╛р▓Чр▓┐р▓жр│Ж. р▓Жр▓╕р│Нр▓др▓┐ р▓╕р▓░р│Нр▓╡р│З р▓╕р▓Вр▓Цр│Нр▓пр│Ж 123/4 р▓╕р│Нр▓кр▓╖р│Нр▓Я р▓╢р│Ар▓░р│Нр▓╖р▓┐р▓Хр│Жр▓пр▓ир│Нр▓ир│Б р▓др│Лр▓░р▓┐р▓╕р│Бр▓др│Нр▓др▓жр│Ж.",
          "р▓нр│Вр▓ор▓┐ р▓кр▓░р▓┐р▓╡р▓░р│Нр▓др▓ир│Жр▓Чр▓╛р▓Чр▓┐, р▓ор▓╛р▓░р▓╛р▓Яр▓ж р▓Тр▓кр│Нр▓кр▓Вр▓ж р▓ор▓др│Нр▓др│Б р▓╕р▓Вр▓мр▓Вр▓зр▓┐р▓д р▓жр▓╛р▓Цр▓▓р│Жр▓Чр▓│р│Кр▓Вр▓жр▓┐р▓Чр│Ж р▓Ер▓░р│Нр▓Ьр▓┐р▓пр▓ир│Нр▓ир│Б р▓Чр│Нр▓░р▓╛р▓о р▓Жр▓жр▓╛р▓п р▓Ер▓зр▓┐р▓Хр▓╛р▓░р▓┐р▓Чр│Ж р▓╕р▓▓р│Нр▓▓р▓┐р▓╕р▓┐."
        ]
      }
    },
    'scholarship': {
      English: {
        patterns: ['scholarship', 'education', 'student', 'study', 'fees'],
        responses: [
          "Available scholarships: Post-matric SC/ST, Merit-cum-means, Minority scholarships. Apply before deadline.",
          "Your scholarship application (ID: SCH2024008901) is approved. Amount тВ╣25,000 will be credited soon.",
          "Required documents: Income certificate, caste certificate, mark sheets, bank details, and Aadhaar card."
        ]
      },
      Hindi: {
        patterns: ['рдЫрд╛рддреНрд░рд╡реГрддреНрддрд┐', 'рд╢рд┐рдХреНрд╖рд╛', 'рдЫрд╛рддреНрд░', 'рдЕрдзреНрдпрдпрди', 'рдлреАрд╕'],
        responses: [
          "рдЙрдкрд▓рдмреНрдз рдЫрд╛рддреНрд░рд╡реГрддреНрддрд┐рдпрд╛рдВ: рдкреЛрд╕реНрдЯ-рдореИрдЯреНрд░рд┐рдХ SC/ST, рдореЗрд░рд┐рдЯ-рдХрдо-рдореАрдиреНрд╕, рдЕрд▓реНрдкрд╕рдВрдЦреНрдпрдХ рдЫрд╛рддреНрд░рд╡реГрддреНрддрд┐ред рд╕рдордп рд╕реАрдорд╛ рд╕реЗ рдкрд╣рд▓реЗ рдЖрд╡реЗрджрди рдХрд░реЗрдВред",
          "рдЖрдкрдХреА рдЫрд╛рддреНрд░рд╡реГрддреНрддрд┐ рдЖрд╡реЗрджрди (ID: SCH2024008901) рд╕реНрд╡реАрдХреГрдд рд╣реИред рд░рд╛рд╢рд┐ тВ╣25,000 рдЬрд▓реНрдж рд╣реА рдЬрдорд╛ рдХреА рдЬрд╛рдПрдЧреАред",
          "рдЖрд╡рд╢реНрдпрдХ рджрд╕реНрддрд╛рд╡реЗрдЬ: рдЖрдп рдкреНрд░рдорд╛рдг рдкрддреНрд░, рдЬрд╛рддрд┐ рдкреНрд░рдорд╛рдг рдкрддреНрд░, рдорд╛рд░реНрдХ рд╢реАрдЯ, рдмреИрдВрдХ рд╡рд┐рд╡рд░рдг рдФрд░ рдЖрдзрд╛рд░ рдХрд╛рд░реНрдбред"
        ]
      },
      Telugu: {
        patterns: ['р░╕р▒Нр░Хр░╛р░▓р░░р▒НтАМр░╖р░┐р░кр▒Н', 'р░╡р░┐р░жр▒Нр░п', 'р░╡р░┐р░жр▒Нр░пр░╛р░░р▒Нр░ер░┐', 'р░Ер░зр▒Нр░пр░пр░ир░В', 'р░лр▒Ар░Ьр▒Бр░▓р▒Б'],
        responses: [
          "р░Ер░Вр░жр▒Бр░мр░╛р░Яр▒Бр░▓р▒Л р░Йр░ир▒Нр░и р░╕р▒Нр░Хр░╛р░▓р░░р▒НтАМр░╖р░┐р░кр▒НтАМр░▓р▒Б: р░кр▒Лр░╕р▒Нр░Яр▒Н-р░ор▒Нр░пр░╛р░Яр▒Нр░░р░┐р░Хр▒Н SC/ST, р░ор▒Жр░░р░┐р░Яр▒Н-р░Хр░ор▒Н-р░ор▒Ар░ир▒Нр░╕р▒Н, р░ор▒Ир░ир░╛р░░р░┐р░Яр▒А р░╕р▒Нр░Хр░╛р░▓р░░р▒НтАМр░╖р░┐р░кр▒НтАМр░▓р▒Б. р░Чр░бр▒Бр░╡р▒Бр░Хр▒Б р░ор▒Бр░Вр░жр▒Б р░жр░░р░Цр░╛р░╕р▒Нр░др▒Б р░Ър▒Зр░пр░Вр░бр░┐.",
          "р░ор▒А р░╕р▒Нр░Хр░╛р░▓р░░р▒НтАМр░╖р░┐р░кр▒Н р░жр░░р░Цр░╛р░╕р▒Нр░др▒Б (ID: SCH2024008901) р░Жр░ор▒Лр░жр░┐р░Вр░Ър░мр░бр░┐р░Вр░жр░┐. р░ор▒Кр░др▒Нр░др░В тВ╣25,000 р░др▒Нр░╡р░░р░▓р▒Л р░Ьр░о р░Ър▒Зр░пр░мр░бр▒Бр░др▒Бр░Вр░жр░┐.",
          "р░Ер░╡р░╕р░░р░ор▒Ир░и р░кр░др▒Нр░░р░╛р░▓р▒Б: р░Жр░жр░╛р░п р░зр▒Гр░╡р▒Ар░Хр░░р░г, р░Хр▒Бр░▓ р░зр▒Гр░╡р▒Ар░Хр░░р░г, р░ор░╛р░░р▒Нр░Хр▒Н р░╖р▒Ар░Яр▒Нр░╕р▒Н, р░мр▒Нр░пр░╛р░Вр░Хр▒Н р░╡р░┐р░╡р░░р░╛р░▓р▒Б р░ор░░р░┐р░пр▒Б р░Жр░зр░╛р░░р▒Н р░Хр░╛р░░р▒Нр░бр▒Б."
        ]
      },
      Tamil: {
        patterns: ['роЙродро╡ро┐родрпНродрпКроХрпИ', 'роХро▓рпНро╡ро┐', 'рооро╛рогро╡ро░рпН', 'рокропро┐ро▒рпНроЪро┐', 'роХроЯрпНроЯрогроорпН'],
        responses: [
          "роХро┐роЯрпИроХрпНроХрпБроорпН роЙродро╡ро┐родрпНродрпКроХрпИроХро│рпН: рокро┐роирпНродрпИроп роорпЖроЯрпНро░ро┐роХрпН SC/ST, роорпЖро░ро┐роЯрпН-роХроорпН-роорпАройрпНро╕рпН, роЪро┐ро▒рпБрокро╛ройрпНроорпИ роЙродро╡ро┐родрпНродрпКроХрпИроХро│рпН. роХро╛ро▓роХрпНроХрпЖроЯрпБро╡рпБроХрпНроХрпБ роорпБройрпН ро╡ро┐рогрпНрогрокрпНрокро┐роХрпНроХро╡рпБроорпН.",
          "роЙроЩрпНроХро│рпН роЙродро╡ро┐родрпНродрпКроХрпИ ро╡ро┐рогрпНрогрокрпНрокроорпН (ID: SCH2024008901) роЕроЩрпНроХрпАроХро░ро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ. родрпКроХрпИ тВ╣25,000 ро╡ро┐ро░рпИро╡ро┐ро▓рпН ро╡ро░ро╡ро╛роХрпБроорпН.",
          "родрпЗро╡рпИропро╛рой роЖро╡рогроЩрпНроХро│рпН: ро╡ро░рпБрооро╛рой роЪро╛ройрпНро▒ро┐родро┤рпН, роХрпБро▓ роЪро╛ройрпНро▒ро┐родро┤рпН, роородро┐рокрпНрокрпЖрогрпН рокроЯрпНроЯро┐ропро▓рпН, ро╡роЩрпНроХро┐ ро╡ро┐ро╡ро░роЩрпНроХро│рпН рооро▒рпНро▒рпБроорпН роЖродро╛ро░рпН роХро╛ро░рпНроЯрпН."
        ]
      },
      Kannada: {
        patterns: ['р▓Йр▓жр▓╛р▓╣р▓░р▓гр│Ж', 'р▓╢р▓┐р▓Хр│Нр▓╖р▓г', 'р▓╡р▓┐р▓жр│Нр▓пр▓╛р▓░р│Нр▓ер▓┐', 'р▓Ер▓зр│Нр▓пр▓пр▓и', 'р▓╢р│Нр▓░р│Зр▓гр▓┐р▓Чр▓│р│Б'],
        responses: [
          "р▓▓р▓нр│Нр▓пр▓╡р▓┐р▓░р│Бр▓╡ р▓╡р▓┐р▓жр│Нр▓пр▓╛р▓░р│Нр▓ер▓┐р▓╡р│Зр▓др▓ир▓Чр▓│р│Б: р▓кр│Лр▓╕р│Нр▓Яр│Н-р▓ор│Жр▓Яр│Нр▓░р▓┐р▓Хр│Н SC/ST, р▓ор│Жр▓░р▓┐р▓Яр│Н-р▓Хр▓ор│Н-р▓ор│Ар▓ир│Нр▓╕р│Н, р▓Ер▓▓р│Нр▓кр▓╕р▓Вр▓Цр│Нр▓пр▓╛р▓д р▓╡р▓┐р▓жр│Нр▓пр▓╛р▓░р│Нр▓ер▓┐р▓╡р│Зр▓др▓ир▓Чр▓│р│Б. р▓Чр▓бр│Бр▓╡р▓┐р▓и р▓ор│Кр▓жр▓▓р│Б р▓Ер▓░р│Нр▓Ьр▓┐ р▓╕р▓▓р│Нр▓▓р▓┐р▓╕р▓┐.",
          "р▓ир▓┐р▓ор│Нр▓о р▓╡р▓┐р▓жр│Нр▓пр▓╛р▓░р│Нр▓ер▓┐р▓╡р│Зр▓др▓и р▓Ер▓░р│Нр▓Ьр▓┐ (ID: SCH2024008901) р▓Ер▓ир│Бр▓ор│Лр▓жр▓┐р▓╕р▓▓р▓╛р▓Чр▓┐р▓жр│Ж. р▓ор│Кр▓др│Нр▓д тВ╣25,000 р▓╢р│Ар▓Шр│Нр▓░р▓жр▓▓р│Нр▓▓р│З р▓Ьр▓ор▓╛ р▓ор▓╛р▓бр▓▓р▓╛р▓Чр│Бр▓др│Нр▓др▓жр│Ж.",
          "р▓Ер▓╡р▓╢р│Нр▓пр▓Х р▓жр▓╛р▓Цр▓▓р│Жр▓Чр▓│р│Б: р▓Жр▓жр▓╛р▓п р▓кр│Нр▓░р▓ор▓╛р▓гр▓кр▓др│Нр▓░, р▓Хр│Мр▓Яр│Бр▓Вр▓мр▓┐р▓Х р▓кр│Нр▓░р▓ор▓╛р▓гр▓кр▓др│Нр▓░, р▓Ер▓Вр▓Хр▓кр▓Яр│Нр▓Яр▓┐, р▓мр│Нр▓пр▓╛р▓Вр▓Хр│Н р▓╡р▓┐р▓╡р▓░р▓Чр▓│р│Б р▓ор▓др│Нр▓др│Б р▓Жр▓зр▓╛р▓░р│Н р▓Хр▓╛р▓░р│Нр▓бр│Н."
        ]
      }
    },
    'complaint': {
      English: {
        patterns: ['complaint', 'grievance', 'problem', 'issue', 'corruption'],
        responses: [
          "Your complaint has been registered with ID: GRV2024012345. You will receive SMS updates on progress.",
          "To file a complaint, describe the issue clearly with supporting documents. Response within 30 days.",
          "For urgent grievances, contact district collector office directly or use CM helpline."
        ]
      },
      Hindi: {
        patterns: ['рд╢рд┐рдХрд╛рдпрдд', 'рд╢рд┐рдХрд╛рдпрдд', 'рд╕рдорд╕реНрдпрд╛', 'рдореБрджреНрджрд╛', 'рднреНрд░рд╖реНрдЯрд╛рдЪрд╛рд░'],
        responses: [
          "рдЖрдкрдХреА рд╢рд┐рдХрд╛рдпрдд ID: GRV2024012345 рдХреЗ рд╕рд╛рде рджрд░реНрдЬ рдХреА рдЧрдИ рд╣реИред рдЖрдкрдХреЛ рдкреНрд░рдЧрддрд┐ рдкрд░ SMS рдЕрдкрдбреЗрдЯ рдорд┐рд▓реЗрдВрдЧреЗред",
          "рд╢рд┐рдХрд╛рдпрдд рджрд░реНрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдореБрджреНрджреЗ рдХрд╛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╡рд░реНрдгрди рдХрд░реЗрдВ рдФрд░ рд╕рдорд░реНрдерди рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдкреНрд░рджрд╛рди рдХрд░реЗрдВред 30 рджрд┐рдиреЛрдВ рдХреЗ рднреАрддрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ред",
          "рддрддреНрдХрд╛рд▓ рд╢рд┐рдХрд╛рдпрддреЛрдВ рдХреЗ рд▓рд┐рдП, рд╕реАрдзреЗ рдЬрд┐рд▓рд╛ рдХрд▓реЗрдХреНрдЯрд░ рдХрд╛рд░реНрдпрд╛рд▓рдп рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВ рдпрд╛ CM рд╣реЗрд▓реНрдкрд▓рд╛рдЗрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред"
        ]
      },
      Telugu: {
        patterns: ['р░лр░┐р░░р▒Нр░пр░╛р░жр▒Б', 'р░лр░┐р░░р▒Нр░пр░╛р░жр▒Б', 'р░╕р░ор░╕р▒Нр░п', 'р░ор▒Бр░жр▒Нр░ж', 'р░нр▒Нр░░р░╖р▒Нр░Яр░╛р░Ър░╛р░░р░В'],
        responses: [
          "р░ор▒А р░лр░┐р░░р▒Нр░пр░╛р░жр▒Б ID: GRV2024012345р░др▒Л р░ир░ор▒Лр░жр▒Б р░Ър▒Зр░пр░мр░бр░┐р░Вр░жр░┐. р░ор▒Ар░Хр▒Б р░кр▒Бр░░р▒Лр░Чр░др░┐р░кр▒И SMS р░Ер░кр▒НтАМр░бр▒Зр░Яр▒НтАМр░▓р▒Б р░╡р░╕р▒Нр░др░╛р░пр░┐.",
          "р░лр░┐р░░р▒Нр░пр░╛р░жр▒Б р░ир░ор▒Лр░жр▒Б р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐, р░╕р░ор░╕р▒Нр░пр░ир▒Б р░╕р▒Нр░кр░╖р▒Нр░Яр░Вр░Чр░╛ р░╡р░┐р░╡р░░р░┐р░Вр░Ър░Вр░бр░┐ р░ор░░р░┐р░пр▒Б р░ор░жр▒Нр░жр░др▒Б р░кр░др▒Нр░░р░╛р░▓р░ир▒Б р░Ер░Вр░жр░┐р░Вр░Ър░Вр░бр░┐. 30 р░░р▒Лр░Ьр▒Бр░▓р▒Нр░▓р▒Л р░╕р▒Нр░кр░Вр░жр░и.",
          "р░др░Хр▒Нр░╖р░г р░лр░┐р░░р▒Нр░пр░╛р░жр▒Бр░▓ р░Хр▒Лр░╕р░В, р░Ьр░┐р░▓р▒Нр░▓р░╛ р░Хр░▓р▒Жр░Хр▒Нр░Яр░░р▒Н р░Хр░╛р░░р▒Нр░пр░╛р░▓р░пр░╛р░ир▒Нр░ир░┐ р░ир▒Зр░░р▒Бр░Чр░╛ р░╕р░Вр░кр▒Нр░░р░жр░┐р░Вр░Ър░Вр░бр░┐ р░▓р▒Зр░жр░╛ CM р░╣р▒Жр░▓р▒Нр░кр▒НтАМр░▓р▒Ир░ир▒НтАМр░ир▒Б р░Йр░кр░пр▒Лр░Чр░┐р░Вр░Ър░Вр░бр░┐."
        ]
      },
      Tamil: {
        patterns: ['рокрпБроХро╛ро░рпН', 'рокрпБроХро╛ро░рпН', 'роЪро┐роХрпНроХро▓рпН', 'рокро┐ро░роЪрпНроЪройрпИ', 'роХрпКро│рпНроХрпИ'],
        responses: [
          "роЙроЩрпНроХро│рпН рокрпБроХро╛ро░рпН ID: GRV2024012345 роЙроЯройрпН рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ. роирпАроЩрпНроХро│рпН роорпБройрпНройрпЗро▒рпНро▒роорпН роХрпБро▒ро┐родрпНродрпБ SMS рокрпБродрпБрокрпНрокро┐рокрпНрокрпБроХро│рпИрокрпН рокрпЖро▒рпБро╡рпАро░рпНроХро│рпН.",
          "рокрпБроХро╛ро░рпИ рокродро┐ро╡рпБ роЪрпЖропрпНроп, рокро┐ро░роЪрпНроЪро┐ройрпИропрпИ родрпЖро│ро┐ро╡ро╛роХ ро╡ро┐ро╡ро░ро┐роХрпНроХро╡рпБроорпН рооро▒рпНро▒рпБроорпН роЖродро░ро╡рпБ роЖро╡рогроЩрпНроХро│рпИ ро╡ро┤роЩрпНроХро╡рпБроорпН. 30 роиро╛роЯрпНроХро│ро┐ро▓рпН рокродро┐ро▓рпН.",
          "роЕро╡роЪро░ рокрпБроХро╛ро░рпНроХро│рпБроХрпНроХрпБ, рооро╛ро╡роЯрпНроЯ роЖроЯрпНроЪро┐ропро░рпН роЕро▓рпБро╡ро▓роХродрпНродрпБроЯройрпН роирпЗро░роЯро┐ропро╛роХ родрпКроЯро░рпНрокрпБ роХрпКро│рпНро│ро╡рпБроорпН роЕро▓рпНро▓родрпБ CM роЙродро╡ро┐ роОрогрпНрогрпИ рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН."
        ]
      },
      Kannada: {
        patterns: ['р▓лр▓┐р▓░р│Нр▓пр▓╛р▓ж', 'р▓лр▓┐р▓░р│Нр▓пр▓╛р▓ж', 'р▓╕р▓ор▓╕р│Нр▓пр│Ж', 'р▓ор│Бр▓жр│Нр▓зр│Ж', 'р▓нр│Нр▓░р▓╖р│Нр▓Яр▓╛р▓Ър▓╛р▓░'],
        responses: [
          "р▓ир▓┐р▓ор│Нр▓о р▓лр▓┐р▓░р│Нр▓пр▓╛р▓ж ID: GRV2024012345 р▓ир│Кр▓Вр▓жр▓┐р▓Чр│Ж р▓жр▓╛р▓Цр▓▓р▓┐р▓╕р▓▓р▓╛р▓Чр▓┐р▓жр│Ж. р▓ир│Ар▓╡р│Б р▓кр│Нр▓░р▓Чр▓др▓┐р▓п р▓мр▓Чр│Нр▓Чр│Ж SMS р▓Ер▓кр│НтАМр▓бр│Зр▓Яр│НтАМр▓Чр▓│р▓ир│Нр▓ир│Б р▓╕р│Нр▓╡р│Ар▓Хр▓░р▓┐р▓╕р│Бр▓др│Нр▓др│Ар▓░р▓┐.",
          "р▓лр▓┐р▓░р│Нр▓пр▓╛р▓ж р▓жр▓╛р▓Цр▓▓р▓┐р▓╕р▓▓р│Б, р▓╕р▓ор▓╕р│Нр▓пр│Жр▓пр▓ир│Нр▓ир│Б р▓╕р│Нр▓кр▓╖р│Нр▓Яр▓╡р▓╛р▓Чр▓┐ р▓╡р▓┐р▓╡р▓░р▓┐р▓╕р▓┐ р▓ор▓др│Нр▓др│Б р▓мр│Жр▓Вр▓мр▓▓ р▓жр▓╛р▓Цр▓▓р│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓Тр▓жр▓Чр▓┐р▓╕р▓┐. 30 р▓жр▓┐р▓ир▓Чр▓│р▓▓р│Нр▓▓р▓┐ р▓кр│Нр▓░р▓др▓┐р▓Хр│Нр▓░р▓┐р▓пр│Ж.",
          "р▓др▓Хр│Нр▓╖р▓гр▓ж р▓лр▓┐р▓░р│Нр▓пр▓╛р▓жр▓Чр▓│р▓┐р▓Чр│Ж, р▓Ьр▓┐р▓▓р│Нр▓▓р▓╛р▓зр▓┐р▓Хр▓╛р▓░р▓┐ р▓Хр▓Ър│Зр▓░р▓┐р▓пр▓ир│Нр▓ир│Б р▓ир│Зр▓░р▓╡р▓╛р▓Чр▓┐ р▓╕р▓Вр▓кр▓░р│Нр▓Хр▓┐р▓╕р▓┐ р▓Ер▓ер▓╡р▓╛ CM р▓╕р▓╣р▓╛р▓пр▓╡р▓╛р▓гр▓┐ р▓мр▓│р▓╕р▓┐р▓░р▓┐."
        ]
      }
    }
  };

  // Auto-greeting when component mounts
  useEffect(() => {
    const serviceContext = localStorage.getItem('chatbot-context');
    
    let greetingText = '';
    
    if (serviceContext && serviceResponses[serviceContext as keyof typeof serviceResponses]) {
      const service = serviceResponses[serviceContext as keyof typeof serviceResponses];
      const langService = service[currentLanguage as keyof typeof service];
      if (langService) {
        greetingText = langService.responses[0];
      }
    } else {
      greetingText = t('chat.greeting');
    }

    const greeting: Message = {
      id: `bot-greeting-${Date.now()}`,
      text: greetingText,
      type: 'bot',
      timestamp: new Date()
    };
    setMessages([greeting]);

    // Speak the greeting if speech is enabled
    if (speechEnabled) {
      speakText(greetingText);
    }

    if (serviceContext) {
      localStorage.removeItem('chatbot-context');
      localStorage.removeItem('chatbot-service');
    }
  }, [currentLanguage, speechEnabled, t]);

  useEffect(() => {
    scrollToBottom();
  }, [messages]);

  const scrollToBottom = () => {
    messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
  };

  const isGovernmentServiceQuery = (query: string): boolean => {
    const governmentKeywords = [
      'pension', 'ration', 'health', 'scheme', 'government', 'service', 'application',
      'certificate', 'document', 'card', 'benefit', 'subsidy', 'registration',
      'рдкреЗрдВрд╢рди', 'рд░рд╛рд╢рди', 'рд╕реНрд╡рд╛рд╕реНрдереНрдп', 'рдпреЛрдЬрдирд╛', 'рд╕рд░рдХрд╛рд░', 'рд╕реЗрд╡рд╛', 'рдЖрд╡реЗрджрди',
      'р░кр▒Жр░ир▒Нр░╖р░ир▒Н', 'р░░р▒Зр░╖р░ир▒Н', 'р░Жр░░р▒Лр░Чр▒Нр░пр░В', 'р░кр░ер░Хр░В', 'р░кр▒Нр░░р░нр▒Бр░др▒Нр░╡р░В', 'р░╕р▒Зр░╡', 'р░жр░░р░Цр░╛р░╕р▒Нр░др▒Б',
      'роУропрпНро╡рпВродро┐ропроорпН', 'ро░рпЗро╖ройрпН', 'роЪрпБроХро╛родро╛ро░роорпН', 'родро┐роЯрпНроЯроорпН', 'роЕро░роЪрпБ', 'роЪрпЗро╡рпИ', 'ро╡ро┐рогрпНрогрокрпНрокроорпН',
      'р▓кр▓┐р▓Вр▓Ър▓гр▓┐', 'р▓░р│Зр▓╖р▓ир│Н', 'р▓Жр▓░р│Лр▓Чр│Нр▓п', 'р▓пр│Лр▓Ьр▓ир│Ж', 'р▓╕р▓░р│Нр▓Хр▓╛р▓░', 'р▓╕р│Зр▓╡р│Ж', 'р▓Ер▓░р│Нр▓Ьр▓┐'
    ];
    
    return governmentKeywords.some(keyword => 
      query.toLowerCase().includes(keyword.toLowerCase())
    );
  };

  const getRelevantResponse = (query: string): string => {
    const lowerQuery = query.toLowerCase();
    
    // Check if it's a government service query
    if (!isGovernmentServiceQuery(query)) {
      return t('chat.irrelevant');
    }
    
    // Check each service for pattern matches
    for (const [serviceKey, service] of Object.entries(serviceResponses)) {
      const langService = service[currentLanguage as keyof typeof service];
      if (langService && langService.patterns) {
        for (const pattern of langService.patterns) {
          if (lowerQuery.includes(pattern.toLowerCase())) {
            const randomIndex = Math.floor(Math.random() * langService.responses.length);
            return langService.responses[randomIndex];
          }
        }
      }
    }

    // Default responses if no pattern matches but is government service related
    const defaultResponses = {
      English: [
        "Thank you for your question. Let me help you with that government service information.",
        "I understand you need assistance with government services. Could you please be more specific about what you need?",
        "I'm here to help with various government services like pension, ration card, health schemes, and more. What specifically can I assist you with?"
      ],
      Hindi: [
        "рдЖрдкрдХреЗ рдкреНрд░рд╢реНрди рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рджред рдореИрдВ рдЙрд╕ рд╕рд░рдХрд╛рд░реА рд╕реЗрд╡рд╛ рдХреА рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд╕рд╛рде рдЖрдкрдХреА рд╕рд╣рд╛рдпрддрд╛ рдХрд░рддрд╛ рд╣реВрдБред",
        "рдореИрдВ рд╕рдордЭрддрд╛ рд╣реВрдБ рдХрд┐ рдЖрдкрдХреЛ рд╕рд░рдХрд╛рд░реА рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рд╕рд╣рд╛рдпрддрд╛ рдЪрд╛рд╣рд┐рдПред рдХреГрдкрдпрд╛ рдмрддрд╛рдПрдВ рдХрд┐ рдЖрдкрдХреЛ рдХреНрдпрд╛ рдЪрд╛рд╣рд┐рдП?",
        "рдореИрдВ рдкреЗрдВрд╢рди, рд░рд╛рд╢рди рдХрд╛рд░реНрдб, рд╕реНрд╡рд╛рд╕реНрдереНрдп рдпреЛрдЬрдирд╛рдУрдВ рдФрд░ рдЕрдиреНрдп рд╕рд░рдХрд╛рд░реА рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рд╕рд╣рд╛рдпрддрд╛ рдХреЗ рд▓рд┐рдП рдпрд╣рд╛рдБ рд╣реВрдБред"
      ],
      Telugu: [
        "р░ор▒А р░кр▒Нр░░р░╢р▒Нр░ир░Хр▒Б р░зр░ир▒Нр░пр░╡р░╛р░жр░╛р░▓р▒Б. р░Ж р░кр▒Нр░░р░нр▒Бр░др▒Нр░╡ р░╕р▒Зр░╡р░╛ р░╕р░ор░╛р░Ър░╛р░░р░Вр░др▒Л р░ир▒Зр░ир▒Б р░ор▒Ар░Хр▒Б р░╕р░╣р░╛р░пр░В р░Ър▒Зр░╕р▒Нр░др░╛р░ир▒Б.",
        "р░ор▒Ар░Хр▒Б р░кр▒Нр░░р░нр▒Бр░др▒Нр░╡ р░╕р▒Зр░╡р░▓р░▓р▒Л р░╕р░╣р░╛р░пр░В р░Ер░╡р░╕р░░р░ор░ир░┐ р░ир▒Зр░ир▒Б р░Ер░░р▒Нр░ер░В р░Ър▒Зр░╕р▒Бр░Хр▒Бр░ир▒Нр░ир░╛р░ир▒Б. р░жр░пр░Ър▒Зр░╕р░┐ р░ор▒Ар░Хр▒Б р░Пр░ор░┐ р░Ер░╡р░╕р░░р░ор▒Л р░др▒Жр░▓р░┐р░пр░Ьр▒Зр░пр░Вр░бр░┐?",
        "р░ир▒Зр░ир▒Б р░кр▒Жр░ир▒Нр░╖р░ир▒Н, р░░р▒Зр░╖р░ир▒Н р░Хр░╛р░░р▒Нр░бр▒Н, р░Жр░░р▒Лр░Чр▒Нр░п р░кр░ер░Хр░╛р░▓р▒Б р░ор░░р░┐р░пр▒Б р░Зр░др░░ р░кр▒Нр░░р░нр▒Бр░др▒Нр░╡ р░╕р▒Зр░╡р░▓р░▓р▒Л р░╕р░╣р░╛р░пр░В р░Хр▒Лр░╕р░В р░Зр░Хр▒Нр░Хр░б р░Йр░ир▒Нр░ир░╛р░ир▒Б."
      ],
      Tamil: [
        "роЙроЩрпНроХро│рпН роХрпЗро│рпНро╡ро┐роХрпНроХрпБ роиройрпНро▒ро┐. роЕроирпНрод роЕро░роЪрпБ роЪрпЗро╡рпИ родроХро╡ро▓рпБроЯройрпН роиро╛ройрпН роЙроЩрпНроХро│рпБроХрпНроХрпБ роЙродро╡рпБроХро┐ро▒рпЗройрпН.",
        "роЙроЩрпНроХро│рпБроХрпНроХрпБ роЕро░роЪрпБ роЪрпЗро╡рпИроХро│ро┐ро▓рпН роЙродро╡ро┐ родрпЗро╡рпИ роОройрпНрокродрпИ роиро╛ройрпН рокрпБро░ро┐роирпНродрпБроХрпКро│рпНроХро┐ро▒рпЗройрпН. родропро╡рпБроЪрпЖропрпНродрпБ роЙроЩрпНроХро│рпБроХрпНроХрпБ роОройрпНрой родрпЗро╡рпИ роОройрпНро▒рпБ роЪрпКро▓рпНро▓рпБроЩрпНроХро│рпН?",
        "роиро╛ройрпН роУропрпНро╡рпВродро┐ропроорпН, ро░рпЗро╖ройрпН роХро╛ро░рпНроЯрпБ, роЪрпБроХро╛родро╛ро░ родро┐роЯрпНроЯроЩрпНроХро│рпН рооро▒рпНро▒рпБроорпН рокро┐ро▒ роЕро░роЪрпБ роЪрпЗро╡рпИроХро│ро┐ро▓рпН роЙродро╡рпБро╡родро▒рпНроХро╛роХ роЗроЩрпНроХрпЗ роЗро░рпБроХрпНроХро┐ро▒рпЗройрпН."
      ],
      Kannada: [
        "р▓ир▓┐р▓ор│Нр▓о р▓кр│Нр▓░р▓╢р│Нр▓ир│Жр▓Чр│Ж р▓зр▓ир│Нр▓пр▓╡р▓╛р▓жр▓Чр▓│р│Б. р▓Ж р▓╕р▓░р│Нр▓Хр▓╛р▓░р▓┐ р▓╕р│Зр▓╡р▓╛ р▓ор▓╛р▓╣р▓┐р▓др▓┐р▓пр│Кр▓Вр▓жр▓┐р▓Чр│Ж р▓ир▓╛р▓ир│Б р▓ир▓┐р▓ор▓Чр│Ж р▓╕р▓╣р▓╛р▓п р▓ор▓╛р▓бр│Бр▓др│Нр▓др│Зр▓ир│Ж.",
        "р▓ир▓┐р▓ор▓Чр│Ж р▓╕р▓░р│Нр▓Хр▓╛р▓░р▓┐ р▓╕р│Зр▓╡р│Жр▓Чр▓│р▓▓р│Нр▓▓р▓┐ р▓╕р▓╣р▓╛р▓п р▓мр│Зр▓Хр│Б р▓Ор▓Вр▓жр│Б р▓ир▓╛р▓ир│Б р▓Ер▓░р│Нр▓ер▓ор▓╛р▓бр▓┐р▓Хр│Кр▓Вр▓бр▓┐р▓жр│Нр▓жр│Зр▓ир│Ж. р▓жр▓пр▓╡р▓┐р▓Яр│Нр▓Яр│Б р▓ир▓┐р▓ор▓Чр│Ж р▓Пр▓ир│Б р▓мр│Зр▓Хр│Б р▓Ор▓Вр▓жр│Б р▓╣р│Зр▓│р▓┐?",
        "р▓ир▓╛р▓ир│Б р▓кр▓┐р▓Вр▓Ър▓гр▓┐, р▓░р│Зр▓╖р▓ир│Н р▓Хр▓╛р▓░р│Нр▓бр│Н, р▓Жр▓░р│Лр▓Чр│Нр▓п р▓пр│Лр▓Ьр▓ир│Жр▓Чр▓│р│Б р▓ор▓др│Нр▓др│Б р▓Зр▓др▓░ р▓╕р▓░р│Нр▓Хр▓╛р▓░р▓┐ р▓╕р│Зр▓╡р│Жр▓Чр▓│р▓▓р│Нр▓▓р▓┐ р▓╕р▓╣р▓╛р▓пр▓Хр│Нр▓Хр▓╛р▓Чр▓┐ р▓Зр▓▓р│Нр▓▓р▓┐р▓жр│Нр▓жр│Зр▓ир│Ж."
      ]
    };
    
    const responses = defaultResponses[currentLanguage as keyof typeof defaultResponses];
    const randomIndex = Math.floor(Math.random() * responses.length);
    return responses[randomIndex];
  };

  const handleSendMessage = (query?: string, response?: string) => {
    const messageText = query || inputText.trim();
    if (!messageText) return;

    const userMessage: Message = {
      id: `user-${Date.now()}`,
      text: messageText,
      type: 'user',
      timestamp: new Date()
    };

    setMessages(prev => [...prev, userMessage]);
    setInputText('');
    setIsTyping(true);

    setTimeout(() => {
      const botResponse = response || getRelevantResponse(messageText);
      
      const botMessage: Message = {
        id: `bot-${Date.now()}`,
        text: botResponse,
        type: 'bot',
        timestamp: new Date()
      };

      setMessages(prev => [...prev, botMessage]);
      setIsTyping(false);
      
      if (speechEnabled) {
        speakText(botResponse);
      }
    }, 2000);
  };

  const handleImageProcessed = (extractedText: string) => {
    const imageMessage: Message = {
      id: `user-image-${Date.now()}`,
      text: `ЁЯУ╖ Document uploaded: ${extractedText}`,
      type: 'user',
      timestamp: new Date()
    };

    setMessages(prev => [...prev, imageMessage]);
    
    // Process the extracted text as a query
    setTimeout(() => {
      handleSendMessage(extractedText);
    }, 500);
  };

  const startListening = () => {
    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
      const SpeechRecognition = (window as any).webkitSpeechRecognition || (window as any).SpeechRecognition;
      const recognition = new SpeechRecognition();
      
      // Set language based on current selection
      const languageCodes = {
        English: 'en-US',
        Hindi: 'hi-IN',
        Telugu: 'te-IN',
        Tamil: 'ta-IN',
        Kannada: 'kn-IN'
      };
      
      recognition.lang = languageCodes[currentLanguage as keyof typeof languageCodes];
      recognition.continuous = false;
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;
      
      recognition.onstart = () => {
        setIsListening(true);
        console.log(`Speech recognition started in ${currentLanguage}`);
      };
      
      recognition.onresult = (event: any) => {
        const transcript = event.results[0][0].transcript;
        console.log('Speech recognized:', transcript);
        setInputText(transcript);
        setTimeout(() => {
          handleSendMessage(transcript);
        }, 500);
      };
      
      recognition.onend = () => {
        setIsListening(false);
        console.log('Speech recognition ended');
      };
      
      recognition.onerror = (event: any) => {
        console.error('Speech recognition error:', event.error);
        setIsListening(false);
      };
      
      recognitionRef.current = recognition;
      recognition.start();
    } else {
      console.error('Speech recognition not supported');
    }
  };

  const speakText = (text: string) => {
    if ('speechSynthesis' in window && speechEnabled) {
      speechSynthesis.cancel(); // Cancel any ongoing speech
      
      setIsSpeaking(true);
      const utterance = new SpeechSynthesisUtterance(text);
      
      // Set language and voice
      const languageCodes = {
        English: 'en-US',
        Hindi: 'hi-IN',
        Telugu: 'te-IN',
        Tamil: 'ta-IN',
        Kannada: 'kn-IN'
      };
      
      utterance.lang = languageCodes[currentLanguage as keyof typeof languageCodes];
      utterance.rate = 0.9;
      utterance.pitch = 1;
      utterance.volume = 0.8;
      
      utterance.onend = () => setIsSpeaking(false);
      utterance.onerror = () => setIsSpeaking(false);
      
      speechSynthesis.speak(utterance);
    }
  };

  const predefinedQueries = {
    English: [
      { query: t('chat.pensionCheck'), response: serviceResponses['pension-inquiry']['English'].responses[0] },
      { query: t('chat.rationCard'), response: serviceResponses['ration-card']['English'].responses[0] },
      { query: t('chat.healthScheme'), response: "You can register for Ayushman Bharat scheme. It provides health coverage up to тВ╣5 lakhs per family per year." },
      { query: t('chat.landRecords'), response: "To verify land records, you need survey number and village details. Documents can be downloaded from state revenue portal." },
      { query: t('chat.scholarship'), response: "Available scholarships: Post-matric SC/ST, Merit-cum-means, Minority scholarships. Apply before deadline." },
      { query: t('chat.complaintFiles'), response: "Your complaint has been registered with ID: GRV2024012345. You will receive SMS updates on progress." }
    ],
    Hindi: [
      { query: t('chat.pensionCheck'), response: serviceResponses['pension-inquiry']['Hindi'].responses[0] },
      { query: t('chat.rationCard'), response: serviceResponses['ration-card']['Hindi'] ? serviceResponses['ration-card']['Hindi'].responses[0] : "рд░рд╛рд╢рди рдХрд╛рд░реНрдб рдХреЗ рд▓рд┐рдП рдЖрд╡реЗрджрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЛ рдЪрд╛рд╣рд┐рдП: рдЖрдзрд╛рд░ рдХрд╛рд░реНрдб, рдкрддрд╛ рдкреНрд░рдорд╛рдг, рдЖрдп рдкреНрд░рдорд╛рдгрдкрддреНрд░, рдФрд░ рдкрд╛рд░рд┐рд╡рд╛рд░рд┐рдХ рддрд╕реНрд╡реАрд░реЗрдВред" },
      { query: t('chat.healthScheme'), response: "рдЖрдк рдЖрдпреБрд╖реНрдорд╛рди рднрд╛рд░рдд рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдкрдВрдЬреАрдХрд░рдг рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдпрд╣ рдкреНрд░рддрд┐ рдкрд░рд┐рд╡рд╛рд░ рдкреНрд░рддрд┐ рд╡рд░реНрд╖ тВ╣5 рд▓рд╛рдЦ рддрдХ рдХрд╛ рд╕реНрд╡рд╛рд╕реНрдереНрдп рдХрд╡рд░реЗрдЬ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИред" },
      { query: t('chat.landRecords'), response: "рднреВрдорд┐ рд░рд┐рдХреЙрд░реНрдб рд╕рддреНрдпрд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╕рд░реНрд╡реЗ рдирдВрдмрд░ рдФрд░ рдЧрд╛рдВрд╡ рдХрд╛ рд╡рд┐рд╡рд░рдг рдЪрд╛рд╣рд┐рдПред рджрд╕реНрддрд╛рд╡реЗрдЬ рд░рд╛рдЬреНрдп рд░рд╛рдЬрд╕реНрд╡ рдкреЛрд░реНрдЯрд▓ рд╕реЗ рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред" },
      { query: t('chat.scholarship'), response: "рдЙрдкрд▓рдмреНрдз рдЫрд╛рддреНрд░рд╡реГрддреНрддрд┐рдпрд╛рдВ: рдкреЛрд╕реНрдЯ-рдореИрдЯреНрд░рд┐рдХ SC/ST, рдореЗрд░рд┐рдЯ-рдХрдо-рдореАрдиреНрд╕, рдЕрд▓реНрдкрд╕рдВрдЦреНрдпрдХ рдЫрд╛рддреНрд░рд╡реГрддреНрддрд┐ред рд╕рдордп рд╕реАрдорд╛ рд╕реЗ рдкрд╣рд▓реЗ рдЖрд╡реЗрджрди рдХрд░реЗрдВред" },
      { query: t('chat.complaintFiles'), response: "рдЖрдкрдХреА рд╢рд┐рдХрд╛рдпрдд ID: GRV2024012345 рдХреЗ рд╕рд╛рде рджрд░реНрдЬ рдХреА рдЧрдИ рд╣реИред рдЖрдкрдХреЛ рдкреНрд░рдЧрддрд┐ рдкрд░ SMS рдЕрдкрдбреЗрдЯ рдорд┐рд▓реЗрдВрдЧреЗред" }
    ],
    Telugu: [
      { query: t('chat.pensionCheck'), response: serviceResponses['pension-inquiry']['Telugu'].responses[0] },
      { query: t('chat.rationCard'), response: serviceResponses['ration-card']['Telugu'] ? serviceResponses['ration-card']['Telugu'].responses[0] : "р░░р▒Зр░╖р░ир▒Н р░Хр░╛р░░р▒Нр░бр▒Н р░Хр▒Лр░╕р░В р░жр░░р░Цр░╛р░╕р▒Нр░др▒Б р░Ър▒Зр░пр░бр░╛р░ир░┐р░Хр░┐ р░ор▒Ар░Хр▒Б р░Ер░╡р░╕р░░р░В: р░Жр░зр░╛р░░р▒Н р░Хр░╛р░░р▒Нр░бр▒Н, р░Ър░┐р░░р▒Бр░ир░╛р░ор░╛ р░░р▒Бр░Ьр▒Бр░╡р▒Б, р░Жр░жр░╛р░п р░зр▒Гр░╡р▒Ар░Хр░░р░г р░кр░др▒Нр░░р░В, р░ор░░р░┐р░пр▒Б р░Хр▒Бр░Яр▒Бр░Вр░м р░лр▒Лр░Яр▒Лр░▓р▒Б." },
      { query: t('chat.healthScheme'), response: "р░ор▒Ар░░р▒Б р░Жр░пр▒Бр░╖р▒Нр░ор░╛р░ир▒Н р░нр░╛р░░р░др▒Н р░кр░ер░Хр░╛р░ир░┐р░Хр░┐ р░ир░ор▒Лр░жр▒Б р░Ър▒Зр░╕р▒Бр░Хр▒Лр░╡р░Ър▒Нр░Ър▒Б. р░Зр░жр░┐ р░Хр▒Бр░Яр▒Бр░Вр░мр░╛р░ир░┐р░Хр░┐ р░╕р░Вр░╡р░др▒Нр░╕р░░р░╛р░ир░┐р░Хр░┐ тВ╣5 р░▓р░Хр▒Нр░╖р░▓ р░╡р░░р░Хр▒Б р░Жр░░р▒Лр░Чр▒Нр░п р░Хр░╡р░░р▒Зр░Ьр▒Н р░Ер░Вр░жр░┐р░╕р▒Нр░др▒Бр░Вр░жр░┐." },
      { query: t('chat.landRecords'), response: "р░нр▒Вр░ор░┐ р░░р░┐р░Хр░╛р░░р▒Нр░бр▒Бр░▓р░ир▒Б р░зр▒Гр░╡р▒Ар░Хр░░р░┐р░Вр░Ър░бр░╛р░ир░┐р░Хр░┐, р░ор▒Ар░Хр▒Б р░╕р░░р▒Нр░╡р▒З р░╕р░Вр░Цр▒Нр░п р░ор░░р░┐р░пр▒Б р░Чр▒Нр░░р░╛р░о р░╡р░┐р░╡р░░р░╛р░▓р▒Б р░Ер░╡р░╕р░░р░В. р░░р░╛р░╖р▒Нр░Яр▒Нр░░ р░░р░╛р░мр░Вр░жр▒А р░кр▒Лр░░р▒Нр░Яр░▓р▒Н р░ир▒Бр░Вр░бр░┐ р░кр░др▒Нр░░р░╛р░▓р░ир▒Б р░бр▒Мр░ир▒НтАМр░▓р▒Лр░бр▒Н р░Ър▒Зр░пр░╡р░Ър▒Нр░Ър▒Б." },
      { query: t('chat.scholarship'), response: "р░Ер░Вр░жр▒Бр░мр░╛р░Яр▒Бр░▓р▒Л р░Йр░ир▒Нр░и р░╕р▒Нр░Хр░╛р░▓р░░р▒НтАМр░╖р░┐р░кр▒НтАМр░▓р▒Б: р░кр▒Лр░╕р▒Нр░Яр▒Н-р░ор▒Нр░пр░╛р░Яр▒Нр░░р░┐р░Хр▒Н SC/ST, р░ор▒Жр░░р░┐р░Яр▒Н-р░Хр░ор▒Н-р░ор▒Ар░ир▒Нр░╕р▒Н, р░ор▒Ир░ир░╛р░░р░┐р░Яр▒А р░╕р▒Нр░Хр░╛р░▓р░░р▒НтАМр░╖р░┐р░кр▒НтАМр░▓р▒Б. р░Чр░бр▒Бр░╡р▒Бр░Хр▒Б р░ор▒Бр░Вр░жр▒Б р░жр░░р░Цр░╛р░╕р▒Нр░др▒Б р░Ър▒Зр░пр░Вр░бр░┐." },
      { query: t('chat.complaintFiles'), response: "р░ор▒А р░лр░┐р░░р▒Нр░пр░╛р░жр▒Б ID: GRV2024012345 р░ир░ор▒Лр░жр▒Б р░Ър▒Зр░пр░мр░бр░┐р░Вр░жр░┐. р░ор▒Ар░Хр▒Б р░кр▒Бр░░р▒Лр░Чр░др░┐р░кр▒И SMS р░Ер░кр▒НтАМр░бр▒Зр░Яр▒НтАМр░▓р▒Б р░╡р░╕р▒Нр░др░╛р░пр░┐." }
    ],
    Tamil: [
      { query: t('chat.pensionCheck'), response: serviceResponses['pension-inquiry']['Tamil'].responses[0] },
      { query: t('chat.rationCard'), response: "ро░рпЗро╖ройрпН роХро╛ро░рпНроЯрпБроХрпНроХрпБ ро╡ро┐рогрпНрогрокрпНрокро┐роХрпНроХ роЙроЩрпНроХро│рпБроХрпНроХрпБ родрпЗро╡рпИ: роЖродро╛ро░рпН роХро╛ро░рпНроЯрпБ, роорпБроХро╡ро░ро┐ роЪро╛ройрпНро▒рпБ, ро╡ро░рпБрооро╛рой роЪро╛ройрпНро▒ро┐родро┤рпН рооро▒рпНро▒рпБроорпН роХрпБроЯрпБроорпНрок рокрпБроХрпИрокрпНрокроЯроЩрпНроХро│рпН." },
      { query: t('chat.healthScheme'), response: "роирпАроЩрпНроХро│рпН роЖропрпБро╖рпНрооро╛ройрпН рокро╛ро░родрпН родро┐роЯрпНроЯродрпНродро┐ро▒рпНроХрпБ рокродро┐ро╡рпБ роЪрпЖропрпНропро▓ро╛роорпН. роЗродрпБ роХрпБроЯрпБроорпНрокродрпНродро┐ро▒рпНроХрпБ роЖрогрпНроЯрпБроХрпНроХрпБ тВ╣5 ро▓роЯрпНроЪроорпН ро╡ро░рпИ роЪрпБроХро╛родро╛ро░ роХро╡ро░рпЗроЬрпН ро╡ро┤роЩрпНроХрпБроХро┐ро▒родрпБ." },
      { query: t('chat.landRecords'), response: "роиро┐ро▓ рокродро┐ро╡рпБроХро│рпИ роЪро░ро┐рокро╛ро░рпНроХрпНроХ, роирпАроЩрпНроХро│рпН роЪро░рпНро╡рпЗ роОрогрпН рооро▒рпНро▒рпБроорпН роХро┐ро░ро╛роо ро╡ро┐ро╡ро░роЩрпНроХро│рпН родрпЗро╡рпИ. роЖро╡рогроЩрпНроХро│рпИ рооро╛роиро┐ро▓ ро╡ро░рпБро╡ро╛ропрпН рокрпЛро░рпНроЯрпНроЯро┐ро▓рпН роЗро░рпБроирпНродрпБ рокродро┐ро╡ро┐ро▒роХрпНроХроорпН роЪрпЖропрпНропро▓ро╛роорпН." },
      { query: t('chat.scholarship'), response: "роХро┐роЯрпИроХрпНроХрпБроорпН роЙродро╡ро┐родрпНродрпКроХрпИроХро│рпН: рокро┐роирпНродрпИроп роорпЖроЯрпНро░ро┐роХрпН SC/ST, роорпЖро░ро┐роЯрпН-роХроорпН-роорпАройрпНро╕рпН, роЪро┐ро▒рпБрокро╛ройрпНроорпИ роЙродро╡ро┐родрпНродрпКроХрпИроХро│рпН. роХро╛ро▓роХрпНроХрпЖроЯрпБро╡рпБроХрпНроХрпБ роорпБройрпН ро╡ро┐рогрпНрогрокрпНрокро┐роХрпНроХро╡рпБроорпН." },
      { query: t('chat.complaintFiles'), response: "роЙроЩрпНроХро│рпН рокрпБроХро╛ро░рпН ID: GRV2024012345 роЙроЯройрпН рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯрпБро│рпНро│родрпБ. роорпБройрпНройрпЗро▒рпНро▒роорпН роХрпБро▒ро┐родрпНродрпБ SMS рокрпБродрпБрокрпНрокро┐рокрпНрокрпБроХро│рпИрокрпН рокрпЖро▒рпБро╡рпАро░рпНроХро│рпН." }
    ],
    Kannada: [
      { query: t('chat.pensionCheck'), response: serviceResponses['pension-inquiry']['Kannada'].responses[0] },
      { query: t('chat.rationCard'), response: "р▓░р│Зр▓╖р▓ир│Н р▓Хр▓╛р▓░р│Нр▓бр│НтАМр▓Чр▓╛р▓Чр▓┐ р▓Ер▓░р│Нр▓Ьр▓┐ р▓╕р▓▓р│Нр▓▓р▓┐р▓╕р▓▓р│Б, р▓ир▓┐р▓ор▓Чр│Ж р▓Ер▓Чр▓др│Нр▓пр▓╡р▓┐р▓жр│Ж: р▓Жр▓зр▓╛р▓░р│Н р▓Хр▓╛р▓░р│Нр▓бр│Н, р▓╡р▓┐р▓│р▓╛р▓╕ р▓кр│Бр▓░р▓╛р▓╡р│Ж, р▓Жр▓жр▓╛р▓п р▓кр│Нр▓░р▓ор▓╛р▓гр▓кр▓др│Нр▓░ р▓ор▓др│Нр▓др│Б р▓Хр│Бр▓Яр│Бр▓Вр▓м р▓Ыр▓╛р▓пр▓╛р▓Ър▓┐р▓др│Нр▓░р▓Чр▓│р│Б." },
      { query: t('chat.healthScheme'), response: "р▓ир│Ар▓╡р│Б р▓Жр▓пр│Бр▓╖р│Нр▓ор▓╛р▓ир│Н р▓нр▓╛р▓░р▓др│Н р▓пр│Лр▓Ьр▓ир│Жр▓Чр│Ж р▓ир│Лр▓Вр▓жр▓гр▓┐ р▓ор▓╛р▓бр▓мр▓╣р│Бр▓жр│Б. р▓Зр▓жр│Б р▓Хр│Бр▓Яр│Бр▓Вр▓мр▓Хр│Нр▓Хр│Ж р▓╡р▓░р│Нр▓╖р▓Хр│Нр▓Хр│Ж тВ╣5 р▓▓р▓Хр│Нр▓╖р▓жр▓╡р▓░р│Жр▓Чр│Ж р▓Жр▓░р│Лр▓Чр│Нр▓п р▓░р▓Хр│Нр▓╖р▓гр│Ж р▓Тр▓жр▓Чр▓┐р▓╕р│Бр▓др│Нр▓др▓жр│Ж." },
      { query: t('chat.landRecords'), response: "р▓нр│Вр▓ор▓┐ р▓жр▓╛р▓Цр▓▓р│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓кр▓░р▓┐р▓╢р│Ар▓▓р▓┐р▓╕р▓▓р│Б, р▓ир▓┐р▓ор▓Чр│Ж р▓╕р▓░р│Нр▓╡р│З р▓╕р▓Вр▓Цр│Нр▓пр│Ж р▓ор▓др│Нр▓др│Б р▓Чр│Нр▓░р▓╛р▓о р▓╡р▓┐р▓╡р▓░р▓Чр▓│р│Б р▓мр│Зр▓Хр▓╛р▓Чр│Бр▓др│Нр▓др▓╡р│Ж. р▓жр▓╛р▓Цр▓▓р│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓░р▓╛р▓Ьр│Нр▓п р▓Жр▓жр▓╛р▓п р▓кр│Лр▓░р│Нр▓Яр▓▓р│НтАМр▓ир▓┐р▓Вр▓ж р▓бр│Мр▓ир│НтАМр▓▓р│Лр▓бр│Н р▓ор▓╛р▓бр▓мр▓╣р│Бр▓жр│Б." },
      { query: t('chat.scholarship'), response: "р▓▓р▓нр│Нр▓пр▓╡р▓┐р▓░р│Бр▓╡ р▓╡р▓┐р▓жр│Нр▓пр▓╛р▓░р│Нр▓ер▓┐р▓╡р│Зр▓др▓ир▓Чр▓│р│Б: р▓кр│Лр▓╕р│Нр▓Яр│Н-р▓ор│Жр▓Яр│Нр▓░р▓┐р▓Хр│Н SC/ST, р▓ор│Жр▓░р▓┐р▓Яр│Н-р▓Хр▓ор│Н-р▓ор│Ар▓ир│Нр▓╕р│Н, р▓Ер▓▓р│Нр▓кр▓╕р▓Вр▓Цр│Нр▓пр▓╛р▓д р▓╡р▓┐р▓жр│Нр▓пр▓╛р▓░р│Нр▓ер▓┐р▓╡р│Зр▓др▓ир▓Чр▓│р│Б. р▓Чр▓бр│Бр▓╡р▓┐р▓и р▓ор│Кр▓жр▓▓р│Б р▓Ер▓░р│Нр▓Ьр▓┐ р▓╕р▓▓р│Нр▓▓р▓┐р▓╕р▓┐." }
    ]
  };

  return (
    <div className="min-h-screen relative p-2 sm:p-4">
      <div className="max-w-7xl mx-auto grid lg:grid-cols-4 gap-4 lg:gap-6">
        <div className="lg:col-span-3">
          <Card className="shadow-2xl bg-white/95 dark:bg-gray-800/95 backdrop-blur-md border-2 border-orange-200 dark:border-gray-700">
            <CardHeader className="bg-gradient-to-r from-orange-500 to-green-500 text-white rounded-t-lg p-4">
              <div className="flex items-center justify-between">
                <CardTitle className="text-xl sm:text-2xl font-serif flex items-center space-x-2 sm:space-x-3">
                  <Bot className="h-6 w-6 sm:h-8 sm:w-8" />
                  <span>GramaBot {t('nav.demo')}</span>
                </CardTitle>
                <div className="flex items-center space-x-2 sm:space-x-3">
                  <Badge variant="secondary" className="bg-white/20 text-white text-xs sm:text-sm">
                    {currentLanguage}
                  </Badge>
                  <Button
                    size="sm"
                    variant="secondary"
                    onClick={() => setSpeechEnabled(!speechEnabled)}
                    className={`${speechEnabled ? 'bg-green-500 text-white' : 'bg-gray-500 text-white'} p-1 sm:p-2`}
                  >
                    {speechEnabled ? <Volume2 className="w-3 h-3 sm:w-4 sm:h-4" /> : <VolumeX className="w-3 h-3 sm:w-4 sm:h-4" />}
                  </Button>
                  <Button
                    size="sm"
                    variant="secondary"
                    onClick={() => setIsVoiceMode(!isVoiceMode)}
                    className={`${isVoiceMode ? 'bg-red-500 text-white' : 'bg-white text-gray-800'} p-1 sm:p-2`}
                  >
                    {isVoiceMode ? <MicOff className="w-3 h-3 sm:w-4 sm:h-4" /> : <Mic className="w-3 h-3 sm:w-4 sm:h-4" />}
                  </Button>
                </div>
              </div>
            </CardHeader>

            <CardContent className="p-3 sm:p-6">
              {/* Chat Messages */}
              <div className="bg-gradient-to-br from-gray-50 to-blue-50 dark:from-gray-800 dark:to-gray-700 rounded-xl border-2 border-gray-200 dark:border-gray-600 p-3 sm:p-4 h-80 sm:h-96 overflow-y-auto mb-4 sm:mb-6 space-y-3 sm:space-y-4 shadow-inner">
                {messages.map((message) => (
                  <div
                    key={message.id}
                    className={`flex ${message.type === 'user' ? 'justify-end' : 'justify-start'} animate-fade-in`}
                  >
                    <div className={`flex items-start space-x-2 max-w-[85%] sm:max-w-xs md:max-w-md lg:max-w-lg`}>
                      {message.type === 'bot' && (
                        <div className="bg-gradient-to-r from-blue-500 to-purple-500 p-1.5 sm:p-2 rounded-full">
                          <Bot className="w-3 h-3 sm:w-4 sm:h-4 text-white" />
                        </div>
                      )}
                      <div
                        className={`px-3 sm:px-4 py-2 sm:py-3 rounded-2xl shadow-lg ${
                          message.type === 'user'
                            ? 'bg-gradient-to-r from-orange-500 to-red-500 text-white'
                            : 'bg-white dark:bg-gray-700 border-2 border-blue-200 dark:border-blue-600'
                        }`}
                      >
                        <p className={`text-xs sm:text-sm leading-relaxed ${message.type === 'bot' ? 'text-gray-800 dark:text-gray-200' : 'text-white'}`}>
                          {message.text}
                        </p>
                        <span className={`text-xs opacity-50 mt-1 sm:mt-2 block ${message.type === 'bot' ? 'text-gray-600 dark:text-gray-400' : 'text-white'}`}>
                          {message.timestamp.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}
                        </span>
                      </div>
                      {message.type === 'user' && (
                        <div className="bg-gradient-to-r from-orange-500 to-red-500 p-1.5 sm:p-2 rounded-full">
                          <User className="w-3 h-3 sm:w-4 sm:h-4 text-white" />
                        </div>
                      )}
                    </div>
                  </div>
                ))}
                
                {isTyping && (
                  <div className="flex justify-start animate-fade-in">
                    <div className="flex items-start space-x-2">
                      <div className="bg-gradient-to-r from-blue-500 to-purple-500 p-1.5 sm:p-2 rounded-full">
                        <Bot className="w-3 h-3 sm:w-4 sm:h-4 text-white" />
                      </div>
                      <div className="bg-white dark:bg-gray-700 border-2 border-blue-200 dark:border-blue-600 px-3 sm:px-4 py-2 sm:py-3 rounded-2xl shadow-lg">
                        <div className="flex space-x-1">
                          <div className="w-2 h-2 bg-blue-500 rounded-full animate-bounce"></div>
                          <div className="w-2 h-2 bg-blue-500 rounded-full animate-bounce" style={{ animationDelay: '0.1s' }}></div>
                          <div className="w-2 h-2 bg-blue-500 rounded-full animate-bounce" style={{ animationDelay: '0.2s' }}></div>
                        </div>
                      </div>
                    </div>
                  </div>
                )}
                
                <div ref={messagesEndRef} />
              </div>

              {/* Quick Actions */}
              <div className="mb-4 sm:mb-6">
                <p className="text-xs sm:text-sm font-semibold mb-2 sm:mb-3 text-gray-700 dark:text-gray-300">Quick Actions:</p>
                <div className="grid grid-cols-2 sm:flex sm:flex-wrap gap-1 sm:gap-2">
                  {predefinedQueries[currentLanguage]?.map((query, index) => (
                    <Button
                      key={index}
                      size="sm"
                      variant="outline"
                      onClick={() => handleSendMessage(query.query, query.response)}
                      className="text-xs hover:bg-blue-50 dark:hover:bg-blue-900 border-blue-300 dark:border-blue-600 p-1 h-auto"
                    >
                      {query.query}
                    </Button>
                  ))}
                </div>
              </div>

              {/* Input Area */}
              <div className="flex flex-col gap-2 sm:gap-3">
                <div className="flex gap-2">
                  <div className="flex-1">
                    <Input
                      value={inputText}
                      onChange={(e) => setInputText(e.target.value)}
                      placeholder={t('chat.placeholder')}
                      onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}
                      className="border-2 border-blue-300 dark:border-blue-600 focus:border-blue-500 rounded-lg bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-sm"
                    />
                  </div>
                  
                  <Button 
                    size="icon" 
                    onClick={() => setShowImageUpload(true)}
                    className="bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 shadow-lg"
                  >
                    <Plus className="w-3 h-3 sm:w-4 sm:h-4" />
                  </Button>
                  
                  {isVoiceMode ? (
                    <Button 
                      size="icon" 
                      onClick={isListening ? () => {
                        if (recognitionRef.current) {
                          recognitionRef.current.stop();
                        }
                        setIsListening(false);
                      } : startListening}
                      className={`${
                        isListening 
                          ? 'bg-red-500 hover:bg-red-600 animate-pulse' 
                          : 'bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600'
                      } shadow-lg`}
                    >
                      {isListening ? <MicOff className="w-3 h-3 sm:w-4 sm:h-4" /> : <Mic className="w-3 h-3 sm:w-4 sm:h-4" />}
                    </Button>
                  ) : (
                    <Button 
                      size="icon" 
                      onClick={() => handleSendMessage()}
                      className="bg-gradient-to-r from-orange-500 to-green-500 hover:from-orange-600 hover:to-green-600 shadow-lg"
                    >
                      <Send className="w-3 h-3 sm:w-4 sm:h-4" />
                    </Button>
                  )}
                </div>

                {isVoiceMode && (
                  <div className="text-center">
                    <p className={`text-xs sm:text-sm ${isListening ? 'text-red-600 font-semibold' : 'text-gray-600 dark:text-gray-400'}`}>
                      {isListening ? `ЁЯОд Listening in ${currentLanguage}... Speak now!` : `ЁЯОд Voice mode activated - Click microphone to speak in ${currentLanguage}`}
                    </p>
                  </div>
                )}

                {speechEnabled && (
                  <div className="text-center">
                    <p className="text-xs text-gray-500 dark:text-gray-400">
                      {isSpeaking ? 'ЁЯФК Speaking...' : 'ЁЯФК Speech responses enabled'}
                    </p>
                  </div>
                )}
              </div>
            </CardContent>
          </Card>
        </div>

        {/* Controls Sidebar */}
        <div className="space-y-4">
          {showControls && (
            <div className="space-y-4">
              <VoiceControls
                isPlaying={isSpeaking}
                onTogglePlay={() => isSpeaking ? speechSynthesis.cancel() : speakText("Test voice")}
                onSpeedChange={(speed) => console.log('Speed changed:', speed)}
                onVolumeChange={(volume) => console.log('Volume changed:', volume)}
              />
              <AccessibilityControls />
            </div>
          )}
        </div>
      </div>

      {/* Image Upload Modal */}
      {showImageUpload && (
        <ImageUpload
          onImageProcessed={handleImageProcessed}
          onClose={() => setShowImageUpload(false)}
        />
      )}
    </div>
  );
};

export default EnhancedChatDemo;
